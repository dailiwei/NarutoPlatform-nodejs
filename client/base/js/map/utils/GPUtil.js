///////////////////////////////////////////////////////////////////////////
// Copyright © 2016 Richway. All Rights Reserved.
// create by dailiwei 2016-04-13 10:42
// arcgis GP 工具服务相关的东西
///////////////////////////////////////////////////////////////////////////

define([
        "dojo/_base/lang",
        "dojo/_base/array",
        "dojo/Deferred",
        'dojo/json',

        "esri/tasks/Geoprocessor",
        "esri/tasks/FeatureSet",
        "esri/geometry/Point",
        "esri/geometry/Polyline",
        "esri/geometry/Polygon",
        "esri/graphic",
        "esri/symbols/SimpleMarkerSymbol",
        "esri/symbols/SimpleLineSymbol",
        "esri/symbols/SimpleFillSymbol",
        "esri/tasks/JobInfo",
        "esri/tasks/LinearUnit",
        "esri/toolbars/draw",
        "esri/SpatialReference"
    ],
    function (
        lang,
        array,
        Deferred,
        JSON,

        Geoprocessor,
        FeatureSet,
        Point,
        Polyline,
        Polygon,
        Graphic,
        SimpleMarkerSymbol,
        SimpleLineSymbol,
        SimpleFillSymbol,
        JobInfo,
        LinearUnit,
        Draw,
        SpatialReference
    ) {
        var GPUtil = {};

        //根据点，获取小流域信息
        GPUtil.getBasinByPoint = function(point) {

        };

        //根据点集 以及面区域，分析权重
        GPUtil.getThiessenByPointsAndPloygon = function(points,ploygon) {

            var defer = new Deferred();
            points = points||[
                {"STCD":"60810320","STNM":"黑山沟","RVNM":"石阡河","HNNM":"沅江","BSNM":"长江","LGTD":"107.96","LTTD":"27.44"},
                {"STCD":"60810321","STNM":"黑山沟","RVNM":"石阡河","HNNM":"沅江","BSNM":"长江","LGTD":"108.224258","LTTD":"27.524485"},
                {"STCD":"60810322","STNM":"黑山沟","RVNM":"石阡河","HNNM":"沅江","BSNM":"长江","LGTD":"108.195833","LTTD":"27.462222"},
                {"STCD":"60810323","STNM":"黑山沟","RVNM":"石阡河","HNNM":"沅江","BSNM":"长江","LGTD":"108.029722","LTTD":"27.468389"},
                {"STCD":"60810324","STNM":"黑山沟","RVNM":"石阡河","HNNM":"沅江","BSNM":"长江","LGTD":"108.034444","LTTD":"27.360833"}
            ];

            ploygon = ploygon||{
                "geostr":"108.2399852790453,27.52644430865011;108.2374765306709,27.52599495426607;108.235123015044,27.52608823632994;108.2331850131978,27.52742182058665;108.2322997321641,27.52768901893756;108.2306850131958,27.52657790782556;108.2292145406469,27.52575515391865;108.2276294576378,27.52631070947465;108.226291024477,27.52673446300147;108.2270193773422,27.52811097531811;108.2265077670987,27.52907790782756;108.2262280904492,27.5302519699216;108.2248222473491,27.53155454492807;108.2226188782067,27.53185568560756;108.221857634174,27.53225850068493;108.2214130269688,27.53320056136819;108.2203966559827,27.53352235227556;108.2187405687418,27.53492182059265;108.2178966559807,27.53518901894356;108.2173308600818,27.535488379431;108.216580263293,27.5346782564106;108.2142145406349,27.53436626503665;108.2121576558676,27.5350871919578;108.2117961242918,27.53547737614865;108.2114512078419,27.53579696300872;108.2098463901323,27.53573335081249;108.2092908345763,27.53575537433138;108.2080408345753,27.53570581717531;108.2066073900212,27.53576264768751;108.2051329840955,27.53677720457309;108.2040077670807,27.53713346338956;108.2030294413421,27.53747636228849;108.1992271545552,27.53591455740985;108.1961558654902,27.53603628863825;108.1949024746472,27.53738903115236;108.1940077670727,27.53796679672356;108.1933087110826,27.53904933999157;108.1923122104307,27.5393648239328;108.1917961242758,27.53992182059665;108.191329273147,27.5403543733585;108.1886583068905,27.54086432208938;108.1873516798278,27.54186626504265;108.1848450337755,27.54216621892744;108.1839521572557,27.542130835491;108.1828484381792,27.54154677990785;108.1812409756129,27.54161049382934;108.1801294575998,27.54102235228156;108.1772863722026,27.54047954629154;108.176220088022,27.5410437654489;108.1744004265622,27.5404059989282;108.1737398227206,27.54075554387748;108.1734535678375,27.54074420151094;108.1723516798158,27.54103293170865;108.1698204840672,27.54157790783756;108.1690638515797,27.53997463296106;108.1676255242131,27.54047876639788;108.1660619391424,27.54015163491433;108.1644567823486,27.54021526406477;108.1648990159644,27.5389535487046;108.1637693230381,27.53842042356854;108.1634627909198,27.53713346338956;108.1627081929374,27.53643430567416;108.1623516798078,27.53594112465705;108.1631865729291,27.53436326414147;108.1628966559367,27.53297737614665;108.1626294575858,27.53154769542719;108.1631960672868,27.53102272526618;108.1631719244916,27.53041383176526;108.1618197923291,27.52916100041118;108.1615183464738,27.52852235227156;108.1611962164822,27.52822389035726;108.1591052876611,27.52830676253615;108.1584416320616,27.5279555899827;108.1584905280035,27.52672208642811;108.1584390550217,27.52542327525628;108.1565130567563,27.52549960311007;108.1536399284988,27.52538573863516;108.151413365997,27.52577343055712;108.1504259528017,27.52573430024025;108.1487556918412,27.52631972911442;108.1479072353518,27.52602235226956;108.1451838466778,27.52543119287239;108.1437457227617,27.52548819292669;108.1425964985854,27.52469741465999;108.1382714795932,27.52435183699587;108.1372075011853,27.52439400211635;108.1359815083457,27.52434541135025;108.1351222011619,27.52464660289238;108.1339695183268,27.52376266124128;108.1334627908958,27.52268901893356;108.1330071295456,27.52214404280466;108.1316075934117,27.52310712670842;108.1306955925429,27.52212286699626;108.129530499226,27.52157299110064;108.1295926872686,27.52000272607117;108.1272453429742,27.51962880096779;108.1252382357677,27.51746256154548;108.1242802550812,27.51701046057941;108.1225977870894,27.51572029605472;108.1226508198585,27.51438350745231;108.1213230339417,27.51265204179337;108.1205959695965,27.51111141272313;108.1176927984787,27.51055712873288;108.1173516797718,27.51018901892356;108.1170633225667,27.50992182057265;108.1165472364118,27.50936480695459;108.1156744336767,27.50908848723865;108.1151082986936,27.50878894025491;108.1151387484549,27.50802159270655;108.1134522114527,27.50769959834866;108.1128868902717,27.50682415075681;108.1129633198508,27.50489598235249;108.1108301411381,27.50321849889846;108.1099852789413,27.50191017641477;108.1090183464318,27.50242182056665;108.1079881408103,27.50274798566023;108.1073516797638,27.50241124113956;108.1067553323783,27.50214404278865;108.1062405686518,27.50269959834465;108.1059522114467,27.50296679669556;108.1056850130958,27.50353293167865;108.1042453293924,27.50446263274277;108.104307924336,27.50604239212988;108.1037299892227,27.50657790780956;108.1034420728271,27.50688861066354;108.1034737093831,27.50768620452269;108.1020443338394,27.50944255896203;108.1020847187678,27.51046167653012;108.1014302862586,27.51141272294472;108.1002383035645,27.51251713714374;108.0992855447747,27.51296679670356;108.0984680805814,27.51339934946541;108.0962720017493,27.51392245466331;108.0943044656692,27.516045952522;108.0933907015625,27.51541717173265;108.092035585459,27.51477764197411;108.0920741054243,27.51380541975111;108.0919987609147,27.51190393727346;108.0892798481521,27.5112563034025;108.0873805358134,27.51133159704948;108.0867961241918,27.51102235225756;108.0859469217172,27.51062157168541;108.0848569694594,27.51004484032102;108.083935236874,27.50960982919871;108.0831850130778,27.50880013003356;108.0822649080966,27.50850882279591;108.0812405686318,27.50796679669956;108.0805608404412,27.50764598913637;108.0792961241858,27.50797737612665;108.0780966816393,27.50826308847497;108.0774852789153,27.50823884395456;108.0770636955273,27.50825556080569;108.0767961241838,27.50796679669956;108.0762299892007,27.50769959834866;108.0749885002132,27.50674758554407;108.0745739019598,27.50630013003156;108.0730992586752,27.50514049597031;108.0726294575138,27.50463346336356;108.0713045538127,27.50340584291987;108.0703604077616,27.50296028627889;108.0698516797338,27.50241124113956;108.0692855447507,27.50214404278865;108.0687405686218,27.50185568558356;108.0681744336387,27.50158848723265;108.0666546582469,27.50065793845804;108.0659627908418,27.49991124113756;108.0612433830147,27.49741256356395;108.0606744336327,27.49714404278466;108.0598516797258,27.49657790780156;108.0584522114087,27.49603293167265;108.0578097146634,27.49569296585207;108.056198216995,27.49575684931566;108.0554298861025,27.49658607973082;108.0520554218528,27.4969452038088;108.0520838371089,27.49766172263533;108.051705351323,27.49910618742598;108.0521003166011,27.50175511320935;108.0520575919917,27.50283319752011;108.0520945860781,27.50376611988413;108.053356759202,27.50683890091958;108.0515077669587,27.50713346336556;108.0505088249006,27.50782085485917;108.0487299891787,27.50824457447756;108.0479072352718,27.50853293168265;108.0467855447327,27.50880013003356;108.0459470912273,27.50937708180269;108.0449587964131,27.50933791757739;108.0444195168988,27.5081952038178;108.0427661423315,27.50826074879398;108.0409986320219,27.51140063459294;108.0384575011063,27.51129990963083;108.0363700987608,27.51138264617604;108.0354072352618,27.51242182057465;108.033980674117,27.51334302757951;108.0327128043786,27.51289864077903;108.0323516797038,27.51213346336956;108.0317749652936,27.51159908362196;108.0307427590754,27.51048507334003;108.0298298087708,27.51019603796654;108.0298963031827,27.5085180458862;108.0312405685918,27.50686626501465;108.0315077669427,27.50630013003156;108.0320739019258,27.50547737612465;108.0324846685277,27.50460701479583;108.0318131122663,27.50333789044586;108.0306744336087,27.50297737612265;108.0303241596284,27.50259933114622;108.0298385571432,27.49955106589856;108.0277692958026,27.49905813919461;108.0262405685878,27.49852235224756;108.0250365484045,27.49814115378806;108.024289037282,27.49853669550929;108.0232937912417,27.49746257848369;108.0220527430636,27.49687684443375;108.0215183463618,27.49630013002356;108.0211848231411,27.49599112259059;108.0198463899803,27.49604415535973;108.0190130566463,27.49601112855849;108.0183966354761,27.49603557652943;108.0170791916274,27.4967326658312;108.0162299891527,27.49713346335756;108.0157879928959,27.49761045310404;108.0145739019118,27.49630013002356;108.0134927319348,27.4952983735666;108.0124852788633,27.49583144784003;108.0117931401908,27.49546520299381;108.0104072352418,27.49575515389465;108.0079697284582,27.49604683412492;108.0070686121923,27.49601112855849;108.0063639613128,27.4960390690967;108.0059124028814,27.49508224129646;108.0059685213168,27.49366653084611;108.0059520079162,27.49324986417911;108.0059829663038,27.49246874981216;108.0052790614096,27.49046045581099;108.004813363167,27.49047890199156;108.0036174810046,27.48984610305442;108.0040183463478,27.48908848722265;108.0042946660637,27.48821568448758;108.0048516796818,27.48769959833265;108.0051188780327,27.48657790779356;108.0054690841962,27.48591604934034;108.0053955368329,27.48406024150465;108.0037299891427,27.48353293166266;108.0028779383608,27.48323430020625;108.001553712828,27.48328679044067;108.0005596535825,27.48260275588066;107.9992851377937,27.48327716044934;107.9958687288283,27.48314176412762;107.9951294574518,27.48353293166266;107.9945633224687,27.48380013001356;107.9939789108472,27.48410937480547;107.9921414813752,27.48403653951896;107.9910701109316,27.48460345439571;107.9895219541921,27.48518901890356;107.987540380026,27.48382545960343;107.9864975604722,27.48437728523321;107.9858546568259,27.48368341723135;107.9848516796658,27.48130013001156;107.984284357888,27.48077444777373;107.9843291848195,27.47964366977803;107.9834416319216,27.47882128886375;107.9829072352198,27.47824457445356;107.9819871302386,27.47795326721592;107.9809212529591,27.47738923455487;107.9804072352178,27.47630013000756;107.9795026942015,27.47601373949084;107.9785963899473,27.4760496485078;107.9776241677243,27.47601112854249;107.9769297232793,27.47603866217966;107.9763296120592,27.47601485846871;107.9750977191545,27.47516718187298;107.9751355948599,27.47421187995164;107.9742855446747,27.47381070943265;107.9739841327279,27.47317204433883;107.9728860763576,27.47215462219175;107.9723516796558,27.47157790778156;107.9720633224507,27.47131070943065;107.9715183463218,27.47046679666956;107.9699728344391,27.46903477626911;107.9686736333204,27.46682489671005;107.9674852788273,27.46687199550566;107.9669085305087,27.46684914123047;107.9662511479669,27.46545621723847;107.9644683110514,27.46380430073324;107.9637405685378,27.46293658426119;107.9642965309948,27.46242144754203;107.9642838492457,27.46210169113986;107.9623261805158,27.46028779411151;107.9623828075775,27.45885892719413;107.9620151385777,27.45816410975651;107.9609052820772,27.45855310715265;107.9600976852341,27.45852109760402;107.9595739018678,27.45741124110356;107.9592629277465,27.45682354036524;107.9573513066512,27.45689932568432;107.9567961240878,27.45630012999156;107.9562347023751,27.45577994091779;107.9559627907538,27.45435568554556;107.9556744335487,27.45381070941665;107.954976462628,27.45233175976269;107.9559627907538,27.45186626497065;107.9563489059342,27.45104815651731;107.9548834179231,27.4506990693317;107.9543709938775,27.44801515005872;107.9533241392218,27.44733911788587;107.9528229388633,27.44575610329042;107.9510426789877,27.44638008603831;107.9493987987781,27.44511950661022;107.9490183463038,27.44352235220356;107.9481744335427,27.44242182051865;107.9478507098554,27.44173588708712;107.9461999801449,27.44121329051552;107.9448963709316,27.44167017256883;107.9442961240778,27.44102235220156;107.9439739940862,27.44072389028726;107.9423513066392,27.44078821456031;107.941554594399,27.43992833093332;107.9403848217201,27.4393762679446;107.9405115374862,27.43617951772503;107.9383473664776,27.43566400801325;107.9379072351838,27.43518901886356;107.9367855446447,27.43492182051265;107.9353981477252,27.43323348636417;107.9338200837591,27.43329604739937;107.9323223827488,27.43382098365196;107.9317908343543,27.43379992652304;107.9315088519322,27.43381108239328;107.9301577370222,27.43333755130566;107.9298516796218,27.43268901886156;107.9281276399069,27.43109159318754;107.9281995257576,27.42927762834234;107.9287405685098,27.42825515384065;107.9290077668607,27.42741124107956;107.9296454825188,27.42648445613958;107.9315502541132,27.42574274335687;107.9321969215942,27.42504484025302;107.9334627907358,27.42464404272665;107.9346150666699,27.42403433542365;107.9351188779767,27.42296679663156;107.9356850129598,27.42214404272465;107.9359522113107,27.42157790774156;107.9371524337509,27.42129199194272;107.93865745898,27.41966767689151;107.9393161978586,27.41935680449543;107.9400192211338,27.41786713978069;107.9410763839494,27.41736821128637;107.9427618358821,27.41780983455061;107.9431744335387,27.41825515383265;107.9443074494901,27.41852503094875;107.9442798141277,27.41922208634211;107.9443344405926,27.42060042971344;107.9448736861985,27.42161944555626;107.9470225645097,27.42263361249501;107.9475869701633,27.42324274335487;107.9490183463038,27.42380012996556;107.95037319114,27.42483905005103;107.9506765358668,27.42548185197212;107.9512955679853,27.42515429663331;107.953153308601,27.42456615508553;107.9558186121513,27.42467177981435;107.9570686121523,27.42462223961249;107.9578779383248,27.42465431697796;107.9587310741762,27.42435531252894;107.9590130565983,27.42436646839918;107.9594297232653,27.42434995499855;107.9601054502623,27.42437674265048;107.962586698908,27.42329394506932;107.9645739018718,27.42297737605865;107.9651188780007,27.42268901885356;107.9659627907618,27.42242182050265;107.9665077668907,27.42210325089519;107.9659522113347,27.42158848716865;107.9648516796498,27.42018901885156;107.9643796744411,27.41975166804826;107.9634627907598,27.41685568551556;107.963019268624,27.41601750327748;107.9624852788233,27.41603866213166;107.9614866758494,27.41599905709691;107.9615279763051,27.41495715307047;107.9611126659749,27.41297225587921;107.9606461200219,27.41209053522963;107.9584820846469,27.41217632353265;107.9576872034614,27.41131840659403;107.9567855446607,27.41103293160465;107.9559334938788,27.41073430014825;107.9549506244119,27.41077326092302;107.95453663651,27.40860491917866;107.951782018181,27.4081661103133;107.9505408004608,27.40731199111773;107.9490077668767,27.40658848715665;107.9481850129698,27.40602235217356;107.9475766620036,27.40573521567159;107.9470647126759,27.40575552681527;107.945888395672,27.40544729927597;107.9446027579214,27.40549826363148;107.9437458582354,27.40504484023701;107.9428189376617,27.40460738770845;107.9403795998234,27.40492541478119;107.9394509160119,27.4039231157895;107.9387299890907,27.40325515382065;107.9384209816577,27.4029216305999;107.9384629941903,27.40186097521711;107.9384354944616,27.40116653077211;107.9384654016882,27.40041183106447;107.9403779383108,27.40048765029196;107.9412874977733,27.40016884332556;107.942109505695,27.40020142931734;107.9446057757708,27.3993264903518;107.9445520987416,27.39797208632511;107.944581259983,27.3972361040654;107.9465431333569,27.39686155165625;107.9470633224307,27.39630012994356;107.9479114059275,27.39575247504946;107.9476188779867,27.39519959825865;107.9473516796358,27.39350176975252;107.9490289257309,27.39271017768375;107.9500292580342,27.3916306014025;107.9515183463058,27.39075515381065;107.9518197582527,27.39011648871682;107.9527358281319,27.38926769314323;107.9551773361091,27.38880158799963;107.9562341937488,27.38824233642583;107.9574852788193,27.38868084011542;107.9588439553069,27.38820463026261;107.9602630565993,27.38826088433166;107.9615201095517,27.38821103895402;107.9614638554826,27.38963014024639;107.9624094256873,27.38992951768803;107.963914823909,27.39155423964029;107.9662405685398,27.39241124105156;107.9670720030023,27.39298337782502;107.9673411002247,27.39213346327356;107.968307456291,27.3918275075984;107.9706065489035,27.39191861952339;107.9709871370115,27.39430787462513;107.9723516796558,27.39518901883156;107.9733262754682,27.39585965956561;107.9762723407375,27.39574287896655;107.9769584776196,27.39500238688697;107.9784627907718,27.39464404270265;107.9796116758639,27.3940360986375;107.9815612404813,27.3943755897402;107.9825858173051,27.39433496745284;107.9840492369026,27.39321276828744;107.9851241677303,27.39325535726318;107.9854284279844,27.39324331977402;107.9859693011945,27.3920972151724;107.9871498906594,27.39100332953785;107.9880408343993,27.39103866211166;107.9887248689593,27.39101153537553;107.9895633224647,27.39158848714465;107.9913830178329,27.39185568549556;107.9947106884628,27.39098373047099;107.9969191777766,27.39107124810344;107.9984043326714,27.39185714355763;107.9998516796778,27.39213346327356;108.0008945670484,27.39285106716953;108.0033907693074,27.39113336832919;108.0028543041919,27.39011954047464;108.0023194666807,27.38962400282233;108.0023528664745,27.38878083604649;108.0015552047985,27.38804173421213;108.0001188780287,27.38769959825265;107.9998516796778,27.38741124104756;107.9976188780267,27.38603293158465;107.9965533737398,27.38488296142314;107.9962405685638,27.38324457437756;107.9959354945076,27.38296187987864;107.9965869430758,27.38235827609126;107.9980758278969,27.38165562580858;107.9985858105362,27.38004484021701;108.000008980839,27.37959423122143;108.0004151698041,27.37788904458812;108.0003941465836,27.37735827608726;107.9995409768238,27.37656776908793;107.9981726703449,27.3766220225602;107.9981907435328,27.37616653075211;107.9981244864798,27.37449477782108;107.9995739018998,27.37381070935265;108.0003966558067,27.37324457436956;108.0017509241997,27.3729219696601;108.0027900138273,27.37131287948954;108.0051294574598,27.37103293157265;108.005572606603,27.37055465330621;108.0059522113667,27.36935568547756;108.0072763012658,27.36772869166116;108.0102087014417,27.36849705646212;108.0117961241318,27.36880012992156;108.0127328442389,27.36912843124561;108.0142577737106,27.36906800644087;108.016002836646,27.36764782007906;108.0165077669307,27.36657790769756;108.0167965310369,27.36603218558341;108.0167596047673,27.36510102645723;108.014836115725,27.36464285588395;108.0151294574678,27.36408848712265;108.0153966558187,27.36165721948833;108.0143311515318,27.35801769311823;108.0136525084106,27.3570314667177;108.0131178743499,27.3565360986075;108.0110110085713,27.35661961504637;108.0103656974271,27.35627812334687;108.0098003423377,27.35508024058767;108.0086502365425,27.35401460066711;108.0081755525686,27.35152833357528;108.0072725035227,27.35069160939926;108.0062299891447,27.35019959822265;108.0051799810059,27.34906637882071;108.0067239670097,27.34716916880399;108.0070633224787,27.34574457434756;108.0078730216439,27.34499435055139;108.0084356979681,27.34380209658993;108.0106850130198,27.34353293155065;108.0124460807296,27.34322629770709;108.0131837584103,27.34325552676528;108.0156202479413,27.34254222923866;108.0159522113747,27.33907790767556;108.0162716965095,27.33847413434609;108.0162242586297,27.33727764183211;108.0162407720303,27.33686097516511;108.016202896325,27.33590496116695;108.0182040017411,27.33344605817019;108.0181146869624,27.3311927419249;108.0184627908038,27.33019959820665;108.0187299891547,27.32935568544556;108.0201419357704,27.32804743077872;108.0213272045973,27.32767216629274;108.0226082986196,27.32628955046047;108.0242961241418,27.32575515375865;108.024903423947,27.32543380366074;108.0256744336047,27.32380012988556;108.0260307432838,27.32346999750682;108.0276265413537,27.32353323671044;108.0311678350305,27.32316421137377;108.0317855447207,27.32157790766156;108.0320739019258,27.32103293153265;108.0323411002767,27.32046679654956;108.0331850130378,27.31936626486465;108.0335687885372,27.31855314094907;108.0357778882027,27.31813135411063;108.0373586309339,27.31909923605585;108.0388690815102,27.31903935378583;108.0392855447267,27.31992182042065;108.0396245272031,27.32046679654956;108.0406744336167,27.31991124099356;108.0426575336617,27.3191390106327;108.0446206955556,27.31994538677267;108.0473995584051,27.32047591791459;108.0490595112059,27.32135428163057;108.0495633225127,27.32242182042265;108.0501294574958,27.32268901877356;108.0506744336247,27.32297737597865;108.0512405686078,27.32324457432956;108.0517855447367,27.32353293153465;108.0531850130538,27.32407790766356;108.0537299891827,27.32436626486865;108.0559949021077,27.32467581483635;108.0574852788993,27.32461674636842;108.0583186122333,27.32464977316966;108.0587352789003,27.32463325976904;108.0590130566783,27.32464424609717;108.0595133415094,27.3246244435798;108.0617348177482,27.3249556949364;108.0628966558567,27.32575515375865;108.0634627908398,27.32602235210956;108.064011259536,27.32631257427776;108.065148276681,27.32601465489818;108.0670574902784,27.32668380366174;108.0684522114167,27.32742182042665;108.0695210387288,27.32792624208504;108.0712937370266,27.3292856306495;108.0724720546274,27.33111031055547;108.0734627908478,27.33157790766956;108.0750075567453,27.33239530404608;108.0768203347958,27.33282709386848;108.0802022249895,27.33468995465556;108.0806744336487,27.33519959821065;108.0818075852338,27.33593134191784;108.0877774338714,27.33630012989556;108.0881744336547,27.33463346322756;108.088871726407,27.33362014399932;108.0892855447667,27.33102235211356;108.089574241056,27.32936429818428;108.0895526753008,27.3288202036743;108.0898516797498,27.32825515376065;108.0901253207005,27.32539962397321;108.0916524542196,27.32398462559969;108.0944448465287,27.32345151741783;108.0967468552653,27.32385234885262;108.0985263691556,27.32234854432667;108.0984419371894,27.32021831564659;108.0988361225738,27.31909364116652;108.0973411003287,27.31714404264065;108.0970739019778,27.31657790765756;108.0965077669947,27.31575515375065;108.0962273104515,27.31457778558565;108.0956744336607,27.31353293152665;108.0952291143787,27.31258936191869;108.09421301466,27.3121098290407;108.0934627908638,27.31130012987556;108.0923411003247,27.31047737596865;108.0918849981651,27.30998516134152;108.0926298305224,27.30714265238743;108.0925961594612,27.30629338209595;108.0942961241978,27.30575515374265;108.0948411003267,27.30546679653756;108.0962405686438,27.30519959818665;108.0967855447727,27.30491124098156;108.0973520866568,27.30464383918013;108.0973110574685,27.30360807257774;108.0976294575338,27.30269959818465;108.0978966558847,27.30185568542356;108.0990183464238,27.30103293151665;108.0992855447747,27.30074457431156;108.0995739019798,27.30047737596065;108.0999301438421,27.29972250671092;108.100721261193,27.29934917500489;108.1014440869856,27.29856904398213;108.1031517150252,27.29731653475804;108.1045739019838,27.29686626484665;108.1048949129975,27.29418360018522;108.1056850130958,27.29381070928865;108.1065083434459,27.29324416740452;108.1096393452387,27.29336827222233;108.1089968484934,27.2921540456046;108.1098645649655,27.29051423440537;108.1097913227779,27.28866653068211;108.1098520866669,27.28713420917481;108.1095633225607,27.28658848706065;108.1092961242098,27.28511798060331;108.1101510911159,27.28267874449025;108.1101101297443,27.28164613137093;108.1126740132099,27.28103544072375;108.1126185390345,27.27963515860457;108.1129567416172,27.27801864248999;108.1143223015142,27.27769335901534;108.1149060688758,27.27706330666024;108.1145633225647,27.27575515371865;108.1142961242138,27.27412843116961;108.1156850131038,27.27242182038265;108.1159522114547,27.27185568539956;108.1162405686598,27.27131070927065;108.1165077670107,27.27074457428756;108.1168180968721,27.27015806034395;108.1179072353278,27.26964404260265;108.1184522114567,27.26920401303416;108.117529563344,27.26876856110239;108.1170739019938,27.26685568539556;108.1165077670107,27.26658848704465;108.1151686556815,27.26556163835677;108.1158236985423,27.26369277577932;108.1142665560714,27.26177939144619;108.1142963276643,27.26102764177111;108.1142707607155,27.26038205935956;108.1127162631014,27.25894173139617;108.1123089551584,27.25723183149246;108.1104262240371,27.2558509110812;108.1098126850826,27.25455076052678;108.1087299892267,27.25297737592265;108.1084627908758,27.25241124093956;108.1080813211489,27.25169031401841;108.1070633225587,27.25103293147665;108.1059627908738,27.25015453385225;108.1096198139887,27.24682445572459;108.1108186122753,27.24687199532966;108.1126207769902,27.24680055028837;108.1154463656427,27.245810220969;108.1187152051635,27.24715292659074;108.1195644076382,27.24685531238694;108.1201033480683,27.24687667469164;108.1220633225707,27.24853293147465;108.1249771409324,27.24899710383831;108.1256744336847,27.24824457426956;108.1267961242238,27.24797737591865;108.1276188781307,27.24768901871356;108.1286900451238,27.24742182036265;108.1303966559107,27.24881070925265;108.1320389085162,27.24958578792081;108.1328966559127,27.25075515369865;108.1335352870981,27.25105656564551;108.1348199415045,27.25244301312926;108.1383974154657,27.25575776465101;108.1389501227144,27.25573585981158;108.1392855448067,27.25714404259265;108.1397180806143,27.25754484011901;108.1401188781407,27.25797737592665;108.1415183464578,27.25824457427756;108.1421433464583,27.25857528309944;108.1428860764936,27.25937684424374;108.1434905279915,27.25993690961963;108.1440077670327,27.26103293148465;108.1448516797938,27.26213346316956;108.1451188781447,27.26269959815265;108.1456850131278,27.26352235205956;108.1463491434452,27.2645507944432;108.1479072353518,27.26546679650556;108.1489551411686,27.26618789296881;108.1499363830314,27.26724692074744;108.1506915235485,27.26884695736981;108.1513085211618,27.26941861942539;108.1529019456423,27.26935548194704;108.1535461378086,27.26938101498742;108.1558610656533,27.27238631826674;108.1577302334065,27.27311419641402;108.1584551276129,27.27465028175596;108.1598691087338,27.27349953170079;108.1620809549812,27.27279925500752;108.1634575012063,27.27185202329018;108.1642855448267,27.27242182038265;108.1652718729525,27.27296679651156;108.1679167297255,27.27156726037763;108.1686032396001,27.27159448883902;108.1712316846977,27.27214441559728;108.1716519456573,27.27212773265455;108.1730408345473,27.2721827999289;108.1742908345483,27.27213325972704;108.1749685282337,27.27216011519581;108.1765507629355,27.27271468740763;108.1764876254571,27.27430875614805;108.176817283118,27.2752494435403;108.1773516798198,27.27574457429156;108.1776313564693,27.27691861943139;108.1784627909318,27.27768901873756;108.1793608215315,27.27865822311117;108.1837405687138,27.27907790762756;108.1842607238792,27.27963932934025;108.1863749816934,27.28004297517391;108.1891666619256,27.2776838646577;108.1895736307844,27.27770000506569;108.1905796257939,27.2763284433784;108.1915689378607,27.27603293149665;108.1923411004047,27.27686626483065;108.1931850131658,27.27713346318156;108.1940168545293,27.27742500777815;108.1943112474332,27.27680122848078;108.1962263950042,27.27687714943352;108.197382604315,27.27599054597145;108.1984624518636,27.2760333383977;108.1990077670767,27.27927945927703;108.1966269212632,27.27965872495658;108.1960893371699,27.2807977766068;108.1968073140585,27.28215462203974;108.1973497131474,27.28213312410136;108.2003410461577,27.28265399134353;108.2009522115227,27.28297737594665;108.202334589996,27.28341503192574;108.2026264736768,27.28524747685993;108.2034627909518,27.28602235207756;108.2037299893027,27.28631070928265;108.2042961242858,27.28657790763356;108.2047903056013,27.28711125317435;108.2064781311235,27.28820117152375;108.2068279303859,27.28857864005704;108.2073411004167,27.29019959817465;108.2088626390464,27.29218381719751;108.209760262745,27.29268901874956;108.2123386590145,27.29082307229625;108.2139784702137,27.29139782001806;108.2150899882267,27.29019814011259;108.2159916809358,27.28991269903163;108.2167492628591,27.28909499747932;108.2173516798518,27.28881070928465;108.2176188782027,27.28852235207956;108.2184834072833,27.28825515372865;108.2191417731692,27.2896501800427;108.2198489671802,27.28962213777923;108.2201562452837,27.29091214971602;108.2201057895545,27.29218639423744;108.2195633226487,27.29268901874956;108.2191880920712,27.29465431687396;108.2201294576318,27.29602235208556;108.2203966559827,27.29658848706865;108.2209600782922,27.29711050719711;108.2212381951544,27.29943509894159;108.2225820536624,27.30068021613009;108.2240183465238,27.30102235208956;108.2243378994754,27.30136726853949;108.2242829000179,27.30275517408531;108.2237299893187,27.30380012986956;108.2234627909678,27.30485118916945;108.2245981805087,27.30633176642758;108.2256797234783,27.30628890618448;108.226896696678,27.30633712395796;108.2287234789061,27.30730378520006;108.2290338765842,27.30925240038173;108.2290016635851,27.31006562602258;108.2298516798618,27.31046679654156;108.2301188782127,27.31163911235196;108.2295521328781,27.31271017761975;108.2287180535588,27.31267711691008;108.2290289937717,27.3132646481063;108.2289855231771,27.31436097514711;108.2290478468534,27.31593242697128;108.2305745395629,27.31657790765756;108.2317855448807,27.31574457432356;108.2331344896518,27.31547737597265;108.2348411004387,27.31686626486265;108.2372196404797,27.31732036642552;108.238246523076,27.31802698399336;108.2395908563019,27.31866144444308;108.2395631192142,27.31936097515111;108.2395954000302,27.32017545540349;108.2410978143109,27.32202159933943;108.2415183465378,27.32241124099556;108.2417855448887,27.32372610780434;108.2406744337767,27.32407790766356;108.240397808885,27.32466411643139;108.2382257711228,27.32568916797301;108.2378436910444,27.32610152827065;108.2373516798678,27.32714404264865;108.2367095222067,27.32807730409688;108.2348411004387,27.32852235211156;108.2342961243098,27.32913911236596;108.2354178148489,27.33017843935247;108.2361989970327,27.33102153831148;108.2384627909798,27.33185568544756;108.2393981208417,27.33249930117073;108.2401082987936,27.33326573319175;108.2406850132038,27.33380012989356;108.2416010152662,27.33535822180019;108.2426294576498,27.33602235211756;108.2429315816735,27.33791888396587;108.2428909593861,27.33894430850011;108.2429178826717,27.33962396887392;108.2426141988607,27.34019780106839;108.2440183465398,27.34074457434356;108.2445633226687,27.34103293154865;108.2465409973665,27.3414105018072;108.2489662632104,27.34269383378522;108.2493760125597,27.34484027069015;108.2538930210269,27.3452011919144;108.2542855448987,27.34603293155265;108.2567961243278,27.34630012990356;108.2576188782347,27.34686626488665;108.2595058140001,27.34731575490437;108.2601188782367,27.34797737599865;108.2609769647174,27.34877242672629;108.2646963793254,27.34994999834181;108.2661503723822,27.34989235402753;108.2676229472531,27.35020044593316;108.2701034160051,27.34987702742161;108.2715219408543,27.34878924530269;108.2745684089557,27.3489099931869;108.2756755188742,27.34852197913494;108.2759575012963,27.34853313500517;108.2770279223041,27.34849071557155;108.2778966560287,27.34908848711065;108.2783782234119,27.34935568546156;108.2788821703524,27.34776395640213;108.2817755758452,27.34836928951893;108.2826280335282,27.35106182153064;108.2835762485897,27.35194038869713;108.2845739021278,27.35241124101956;108.2851188782567,27.35269959822465;108.2862405687958,27.35296679657556;108.2869004266522,27.35331595157801;108.2882591370483,27.3528397417252;108.2892855449267,27.35213346324156;108.2906850132438,27.35131070933465;108.2912299893727,27.35046679657356;108.2920739021338,27.35019959822265;108.2926188782627,27.34991124101756;108.2931850132458,27.34964404266665;108.294278220712,27.34906556501862;108.2959040616421,27.350184373342;108.2970071025501,27.35053359616129;108.2973411004887,27.35158848711265;108.2981850132498,27.35213346324156;108.2987299893787,27.35297737600265;108.3004072354738,27.35324457435356;108.3009522116027,27.35353293155865;108.3016519457613,27.35366653073411;108.3015064786387,27.35464217770754;108.3021159485828,27.3555278995507;108.3020520651192,27.35713875295911;108.3021327671592,27.35917322426065;108.3027736363003,27.35976706242301;108.3034014167913,27.36044458656635;108.3044059198303,27.36109325464413;108.3056744338287,27.36247244572596;108.3051188782727,27.36352235213956;108.3045739021438,27.3649928585969;108.3051396980427,27.36660720457259;108.3051078241278,27.36741161402418;108.306206931659,27.36842995169861;108.3065077671627,27.36925575736333;108.3055490404909,27.37064895262269;108.307768685675,27.3725291745209;108.3081744338307,27.37381070935265;108.3087550138008,27.37465448648007;108.3092950393004,27.37463309026694;108.3101188782767,27.37492182046465;108.312438688934,27.37536473224886;108.3131744338347,27.37682974554214;108.3109522116107,27.37713346326156;108.3095722067268,27.37742219345928;108.308736228536,27.37738903102435;108.3069613261909,27.37861041231873;108.3055732511029,27.38010848632167;108.303739619374,27.37935531249294;108.3026776754713,27.37939739284236;108.3016802932005,27.3788696421909;108.3007139032258,27.37991269910363;108.2997278463674,27.38022486001968;108.2992753724087,27.38165413383809;108.2973463902023,27.38157770425904;108.2955135044586,27.38165033609504;108.2943356615757,27.38102706542396;108.2920633227067,27.38075515380265;108.2901294576878,27.37963346326356;108.2895127313418,27.37936626491266;108.2884627910198,27.37992182046865;108.2876188782587,27.38018901881956;108.287145177629,27.3811927419649;108.2845633227007,27.38241124104356;108.2842961243498,27.38340682616806;108.2851294576838,27.38380012993356;108.2856744338127,27.38408848713865;108.2876500061884,27.38440319118621;108.2875966343351,27.38574986409311;108.2876742846173,27.38770882134294;108.290883716586,27.3875816308589;108.2915713115301,27.38832375054265;108.2925196622253,27.39033316352169;108.2932625278943,27.39141270589451;108.293848804479,27.39195598660241;108.295091141177,27.39129860406066;108.2956797235343,27.39132193305373;108.2964890497068,27.39128985568825;108.2975545879021,27.39166332302796;108.2978966560447,27.39381070936865;108.2981850132498,27.39435568549756;108.2984522116007,27.39575515381466;108.2989029223216,27.39704116455787;108.2973385234488,27.39908123074874;108.2976793030715,27.40005341906332;108.2976184713657,27.40158774116741;108.2981251309798,27.40254524713606;108.2990183465838,27.40296679661556;108.3005852546797,27.40392620145574;108.3015077671587,27.40492182048865;108.3017961243638,27.40518901883956;108.3026335267082,27.40648581246039;108.3026184713697,27.40686517986521;108.3029222908144,27.40773204862675;108.3040739563969,27.40768637398479;108.3040075637102,27.40936097522311;108.3040515768396,27.41047208633511;108.3039964417484,27.41186270455454;108.3048516799218,27.41213346328956;108.3053966560507,27.41242182049465;108.3059627910338,27.41268901884556;108.3067855449407,27.41325515382865;108.3079743741517,27.4136315372925;108.3085035489569,27.41475282093055;108.3096016392355,27.41577024307763;108.3103484382812,27.41735268122994;108.3098308601558,27.41882942683658;108.3099051874128,27.42070557972437;108.3090420146691,27.42150537763083;108.3085371182928,27.4225750865618;108.3097532776905,27.42336040557285;108.310767749805,27.42383915855717;108.3123411005007,27.42492182050465;108.3129072354838,27.42518901885556;108.3134522116127,27.42547737606065;108.3140183465958,27.42574457441156;108.31474500404,27.4276105547733;108.3152736363104,27.42810039581102;108.3156744338367,27.42853293161865;108.3163953268495,27.4292008935875;108.3173305210776,27.43021017771375;108.3186477953842,27.43143074520604;108.3192855449507,27.43244240292169;108.3181744338387,27.43296679663956;108.3157531691883,27.43449894860476;108.3153744799519,27.43648242164237;108.3157498461632,27.43827668569546;108.3137615920383,27.44011893016308;108.3134459724634,27.44636614967763;108.3145739021518,27.44741124109556;108.3152950664319,27.44818957497205;108.3163421584466,27.44886570887016;108.3170633227267,27.44964404274665;108.3180998353143,27.45060446483944;108.3195739021558,27.45130012998756;108.3201188782847,27.45158848719265;108.3217305454952,27.45209874109931;108.3223411005087,27.45242182052665;108.3231850132698,27.45268901887756;108.3253939433931,27.45404152403273;108.3259522116227,27.45464404275066;108.3267961243838,27.45491124110156;108.3274612041369,27.45526314268604;108.3282697165074,27.45613580978744;108.3290077671807,27.45769959830865;108.3301763191565,27.45825108485423;108.3314061775559,27.45957846387005;108.3329846145146,27.46059775098024;108.3336088685299,27.46192051845092;108.3345705791426,27.46550453673721;108.3354402623031,27.46631033643403;108.3353962491737,27.46742107455341;108.3356850132798,27.46796679666756;108.3359537714181,27.46993317986141;108.3365130569003,27.46991103766304;108.3374654766059,27.46994877773469;108.3379452129344,27.47146407721506;108.3378951641062,27.47272733540835;108.338752368968,27.47434731018178;108.3387111363291,27.47538721361143;108.3388741680133,27.47616653083211;108.3378853984812,27.47595083937143;108.3367852058805,27.4760392386228;108.3351171150589,27.47558272956211;108.3341237339817,27.47613696268972;108.3320686124523,27.47597182868351;108.3306797235623,27.4760834552027;108.3298463902283,27.47601648607287;108.3294549514259,27.47604791917837;108.3285270814164,27.47712491841968;108.3272261509684,27.4762025076659;108.3263828485588,27.4739802854419;108.3253916376205,27.47353798400926;108.32402336505,27.47240618876096;108.3230769810432,27.47181343566804;108.3220804803913,27.47189349344805;108.320504010121,27.47312809902629;108.3180773201234,27.4725987885875;108.3164956279563,27.47383749708459;108.3156797235503,27.4737719521084;108.3151241679943,27.47381657558934;108.3144343350944,27.47376113532237;108.3132916891516,27.47243490919284;108.3122797940771,27.47214909511926;108.311801142818,27.47270465067526;108.3112249709425,27.47296174431696;108.3105230666451,27.47335338656987;108.3095485386495,27.47266243469215;108.3090130568783,27.47270546447734;108.3084847636921,27.47266301113529;108.307912253926,27.47298242845326;108.306631261629,27.47336810282422;108.306245587258,27.47381576178726;108.3054490106514,27.47450206821142;108.306523365036,27.47601729987496;108.3068083992159,27.4766559988772;108.3075059632356,27.47725699171623;108.3081174676848,27.47928810608417;108.3090841967438,27.4808369409921;108.3089577861534,27.48240981696991;108.3104355151042,27.48297059442262;108.3103907559896,27.48352764194911;108.310446230165,27.48421747484897;108.3118425110906,27.4854204438712;108.3128250414733,27.48656088576664;108.313297928301,27.48813162551399;108.3138244582493,27.48956537524387;108.3134058248939,27.49148452400842;108.3127785869377,27.49260879158745;108.3112249709425,27.49296174433296;108.3101067390623,27.49383749710059;108.3088022143217,27.49373268617385;108.308467809482,27.49520465069326;108.3081540887786,27.4960590750646;108.3072075013213,27.49598301847817;108.3063886129743,27.49604880081329;108.3051466153604,27.4967417532878;108.304856698368,27.49770465069526;108.3033987719345,27.49875153925946;108.301523365032,27.49796174433696;108.2995358568924,27.49736336244629;108.2987352790923,27.49742768671934;108.2983852085625,27.49739957663903;108.2978749546558,27.49680733217241;108.2959705899624,27.49696036087261;108.2949581523531,27.49752524124416;108.294578920582,27.49974380135878;108.2954763408301,27.50135217945252;108.295381668521,27.50253015796908;108.2944652595576,27.50331968162423;108.2927112447993,27.5031787243216;108.2911627828839,27.50414521602159;108.29069003169,27.50520465070126;108.2897752503308,27.50667027434609;108.2899417406738,27.50874248571928;108.289378860899,27.50922744394449;108.2870386373728,27.50975909406428;108.2848463901923,27.50958293982151;108.2840053257385,27.50965051930291;108.283467809462,27.50935063323496;108.2826138598085,27.50909353959326;108.2818513950727,27.50866815846228;108.281245587238,27.50937131737126;108.2809471931405,27.50962841101296;108.2804264954405,27.51023276078558;108.280134476126,27.51214907819705;108.2797399177489,27.51322351735264;108.2760865567434,27.51352887963044;108.2739556838033,27.51411207054888;108.2733186124053,27.51406088578864;108.2728929260985,27.51409508243038;108.2726277622528,27.51378731265474;108.2720413500344,27.51411449500092;108.2712926521172,27.51405432450934;108.270134476118,27.51437130042105;108.2671857999004,27.51499702945258;108.2650983975549,27.51556831851554;108.2651440382885,27.51613579288123;108.2637477573629,27.51701034189994;108.2628923157389,27.51892740529666;108.2612305318834,27.51879387393804;108.258735821595,27.51933801931066;108.258297928257,27.51984627262052;108.2553525072477,27.52046176130917;108.2546690491308,27.51893005015343;108.2526164368245,27.51909498070912;108.2517945645365,27.518636420189;108.251245587214,27.51740620575117;108.2505876960459,27.51647831878753;108.2506909132769,27.51519430864111;108.2506588359114,27.5147954438947;108.2479378886436,27.51501408538793;108.247356698322,27.51714907820105;108.2467805264465,27.51740620575117;108.24624558721,27.51770463375705;108.2456694153345,27.51796176130717;108.245134476098,27.51826018931305;108.2443708584759,27.51860095198151;108.2432861959316,27.51985993771385;108.2410851325618,27.52139244571746;108.2405615187376,27.5231316424962;108.2399140035461,27.52368948687056;108.239578920538,27.52533780908325;108.2399852790453,27.52644430865011"
            };

            var ringstr = (ploygon.geostr);
            var arrays = ringstr.split(";");
            var polyGon = new Polygon();
            var ringsArray = new Array();
            var graphic = new Graphic();
            array.forEach(arrays, function (item) {

                var array2 = item.split(",");
                var mp = new Point(array2[0], array2[1]);
                ringsArray.push(mp);

            }, this);
            polyGon.addRing(ringsArray);
            graphic.geometry = polyGon;

            var polySymbolRed = new SimpleFillSymbol();
            polySymbolRed.setOutline(new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new dojo.Color([0, 0, 0, 0.5]), 1));
            polySymbolRed.setColor(new dojo.Color([239, 239, 18, 0.25]));
            graphic.symbol = polySymbolRed;

            var features = [];
            for (var i = 0, max = points.length; i < max; i++) {
                var item = points[i];
                var pt = new Point(Number(item.LGTD), Number(item.LTTD));
                var gra = new Graphic(pt, new SimpleMarkerSymbol(), item);
                features.push(gra);
            }

            var featureset_stations = new FeatureSet();
            featureset_stations.features = features;//把返回的测站最为泰森的测站点
            var stationsPoint = featureset_stations;

            this.getThiessen(defer,stationsPoint,graphic);

            return defer;
        };

        GPUtil.getThiessen = function(defer,stationsPoint,watershedGraphic){
            var gpUrl = 'http://www.rwworks.com:6080/arcgis/rest/services/GP/Thiessen/GPServer/Thiessen';
            var gp = new Geoprocessor(gpUrl);


            var features_watershed = [];
            features_watershed.push(watershedGraphic);
            var featureset_watershed = new FeatureSet();
            featureset_watershed.features = features_watershed;

            var features_extent = [];
            var graphic_extent = new Graphic(watershedGraphic.geometry, new SimpleFillSymbol());
            features_extent.push(graphic_extent);
            var featureset_extent = new FeatureSet();
            featureset_extent.features = features_extent;
            var parms = {
                watershed : featureset_watershed,
                extent:featureset_extent,
                stations:stationsPoint
            };
            //这里函数是异步的，使用函数是submitJob,同步的使用的是execute。
            //成功之后，调用jobResult,建议看一下这个参数。
            gp.submitJob(parms, lang.hitch(this,lang.partial(this.handlerThiessenJob,gp,defer)));
        };

        GPUtil.handlerThiessenJob = function(gp,defer,result){
            Logger.log("river_thiessen:"+result.jobStatus);
            var jobId = result.jobId;
            var status = result.jobStatus;
            if(status === JobInfo.STATUS_SUCCEEDED) {
                gp.getResultData(jobId, "thiessen", lang.hitch(this,lang.partial(this.polygon_thiessenResults,defer)));
            }
        };

        GPUtil.polygon_thiessenResults  = function(defer,results){
            console.log(results);
            var features = results.value.features;
            var plysr = "";
            for(var i = 0, length = features.length; i != length; ++i) {
                var feature = features[i];
                var polySymbolRed = new SimpleFillSymbol();
                polySymbolRed.setOutline(new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new dojo.Color([0,124, 0, 0.5]), 1));
                polySymbolRed.setColor(new dojo.Color([155, 0, 0, 0.5]));
                feature.setSymbol(polySymbolRed);

                var json =  feature.toJson();
                var jsr = JSON.stringify(json);
                //console.log(jsr);
                plysr+=jsr+";";
            }
            plysr = plysr.substring(0,plysr.length-1);
            Logger.log(plysr);//输出的是可以入库的泰森数据
            defer.resolve(features);
        };

        //根据点集 以及面区域ADCD，分析权重
        GPUtil.getThiessenByPointsAndAdcd = function(points,ADCD) {

        };

        //根据点集 以及面区域，分析等值线面
        GPUtil.getContourByPointsAndPloygon = function(points,ploygon,isLine) {

        };

        //根据点集 以及面区域ADCD，分析等值线面
        GPUtil.getContourByPointsAndPloygon = function(points,ploygon,isLine) {

        };

        GPUtil._processProxy = function(config){
            esriConfig.defaults.io.alwaysUseProxy = config.httpProxy &&
            config.httpProxy.useProxy && config.httpProxy.alwaysUseProxy;
            esriConfig.defaults.io.proxyUrl = "";
            esriConfig.defaults.io.proxyRules = [];

            if (config.httpProxy && config.httpProxy.useProxy && config.httpProxy.url) {
                esriConfig.defaults.io.proxyUrl = config.httpProxy.url;
            }
            if (config.httpProxy && config.httpProxy.useProxy && config.httpProxy.rules) {
                array.forEach(config.httpProxy.rules, function(rule) {
                    esriUrlUtils.addProxyRule(rule);
                });
            }
        };


        return GPUtil;
    });
