// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.16/esri/copyright.txt for details.
//>>built
require({cache:{"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(l,n,f,p,e,b){l=p("dijit._OnDijitClickMixin",null,{connect:function(f,a,d){return this.inherited(arguments,[f,"ondijitclick"==a?b:a,d])}});l.a11yclick=b;return l})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(l,n,f,p,e,b,k){var a={_isElementShown:function(a){var c=
p.get(a);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=f.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return f.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var b=a.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;c=b.body}catch(k){try{c=a.contentWindow.document.body}catch(n){return!1}}return c&&("true"==c.contentEditable||
c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(b){return f.get(b,"disabled")?void 0:f.has(b,"tabIndex")?+f.get(b,"tabIndex"):a.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=a.effectiveTabIndex(b)},isFocusable:function(b){return-1<=a.effectiveTabIndex(b)},_getTabNavigable:function(d){function c(h){return h&&"input"==h.tagName.toLowerCase()&&h.type&&"radio"==h.type.toLowerCase()&&h.name&&h.name.toLowerCase()}
var r,k,n,e,p,u,h={},F=a._isElementShown,B=a.effectiveTabIndex,v=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=b("ie")&&"HTML"!==a.scopeName||!F(a))){var q=B(a);if(0<=q){if(0==q)r||(r=a),k=a;else if(0<q){if(!n||q<e)e=q,n=a;if(!p||q>=u)u=q,p=a}q=c(a);f.get(a,"checked")&&q&&(h[q]=a)}"SELECT"!=a.nodeName.toUpperCase()&&v(a)}};F(d)&&v(d);return{first:h[c(r)]||r,last:h[c(k)]||k,lowest:h[c(n)]||n,highest:h[c(p)]||p}},getFirstInTabbingOrder:function(b,c){var f=a._getTabNavigable(n.byId(b,
c));return f.lowest?f.lowest:f.first},getLastInTabbingOrder:function(b,c){var f=a._getTabNavigable(n.byId(b,c));return f.last?f.last:f.highest}};e.mixin(k,a);return a})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(l,n,f,p){function e(a){if((a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var b;f(document,"keydown",function(a){e(a)?(b=a.target,a.preventDefault()):
b=null});f(document,"keyup",function(a){e(a)&&a.target==b&&(b=null,f.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var k=function(a,b){a.dojoClick=!0;return f(a,"click",b)};k.click=k;k.press=function(a,b){var c=f(a,p.press,function(a){("mousedown"!=a.type||n.isLeft(a))&&b(a)}),k=f(a,"keydown",function(a){(a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&b(a)});return{remove:function(){c.remove();k.remove()}}};
k.release=function(a,b){var c=f(a,p.release,function(a){("mouseup"!=a.type||n.isLeft(a))&&b(a)}),k=f(a,"keyup",function(a){(a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&b(a)});return{remove:function(){c.remove();k.remove()}}};k.move=p.move;return k})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),
function(l,n,f,p,e,b,k,a,d,c,r,y,D,w,x){l=l([D],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(a,h){this.pointSymbol=h&&h.pointSymbol;this.polylineSymbol=h&&h.polylineSymbol;this.polygonSymbol=h&&h.polygonSymbol;this._outSR=h&&(h.outSpatialReference||h.outSR)||new d({wkid:4326});this._options=f.mixin({},h)},parse:function(){console.error("parse function has not been implemented")},getFeatureLayers:function(){var a=[];this._fLayers&&(a=a.concat(this._fLayers));
return a},onRefresh:function(){},onOpacityChange:function(){},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._createLayer()},_createLayer:function(a){var h=this;this._fireUpdateStart();a=this.parse(a);a.addCallback(function(a){h._io=null;h._initLayer(a)});a.addErrback(function(a){h._io=null;a=f.mixin(Error(),a);a.message="Unable to load resource: "+h.url+" "+(a.message||"");h._fireUpdateEnd(a);h.onError(a)})},_initLayer:function(a){this.loaded&&this._removeInternalLayers();
this.name=a.name;this.description=a.description;this.snippet=a.snippet;this.defaultVisibility=void 0!==a.visibility?this.visible=!!a.visibility:this.visible=!0;this.featureInfos=a.featureInfos;this.fullExtent=this.initialExtent=new c(a.lookAtExtent);this.copyright=a.author||a.copyright;var h;if((a=f.getObject("featureCollection.layers",!1,a))&&0<a.length)this._fLayers=[],p.forEach(a,function(a,b){var c=f.getObject("featureSet.features",!1,a);c&&0<c.length&&(h=f.mixin({outFields:["*"],infoTemplate:a.popupInfo?
new x(a.popupInfo):null,editable:!1},this._options),h.id&&(h.id=h.id+"_"+b),a.layerDefinition.capabilities="Query,Data",c=new w(a,h),c.geometryType&&(this["_"+c.geometryType]=c),this._fLayers.push(c))},this),0===this._fLayers.length&&delete this._fLayers;this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),this.pointSymbol&&(a=new y(this.pointSymbol),this._esriGeometryPoint.setRenderer(a)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),
this.polylineSymbol&&(a=new y(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(a)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(a=new y(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(a)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),this.onRefresh())},_addInternalLayers:function(){var a=this._map;this._fireUpdateStart();var h=a.spatialReference,b=this._outSR,c;if(h.wkid)c=h._isWebMercator()&&
b._isWebMercator()||h.wkid===b.wkid;else if(h.wkt)c=h.wkt===b.wkt;else{console.log("_setMap - map has invalid spatial reference");return}if(!c)if(h._isWebMercator()&&4326===b.wkid)this._converter=r.geographicToWebMercator;else if(b._isWebMercator()&&4326===h.wkid)this._converter=r.webMercatorToGeographic;else{console.log("_setMap - unsupported workflow. Spatial reference of the map and layer do not match, and the conversion cannot be done on the client.");return}(h=this._fLayers)&&0<h.length&&p.forEach(h,
function(h){if(this._converter){var b=h.graphics,c,A,t=b?b.length:0;for(c=0;c<t;c++)(A=b[c].geometry)&&b[c].setGeometry(this._converter(A))}a.addLayer(h)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var a=this._map;a&&p.forEach(this.getFeatureLayers(),a.removeLayer,a)},setScaleRange:function(a,h){this.inherited(arguments);p.forEach(this.getFeatureLayers(),function(b){b.setScaleRange(a,h)});this._options.minScale=this.minScale;this._options.maxScale=
this.maxScale},setOpacity:function(a){this.opacity!=a&&(p.forEach(this.getFeatureLayers(),function(h){h.setOpacity(a)}),this.opacity=this._options.opacity=a,this.onOpacityChange(a))},onVisibilityChange:function(a){this._fireUpdateStart();p.forEach(this.getFeatureLayers(),function(h){h.setVisibility(a)});this._fireUpdateEnd()},_setMap:function(a,h){this.inherited(arguments);this._map=a;var c=this._div=e.create("div",null,h);b.set(c,"position","absolute");this._addInternalLayers();this.evaluateSuspension();
return c},_unsetMap:function(a,h){this._io&&this._io.cancel();n.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var b=this._div;b&&(h.removeChild(b),e.destroy(b));this._div=null;this.inherited(arguments)}});k("extend-esri")&&f.setObject("layers._ServiceGeneratedFeatureCollection",l,a);return l})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(l,n,f,p,e,b,
k,a,d,c){function r(a,m,t){return x&&t?function(a,g){return b(a,t,g)}:h?function(h,t){var c=b(h,m,function(a){t.call(this,a);g=(new Date).getTime()}),s=b(h,a,function(a){(!g||(new Date).getTime()>g+1E3)&&t.call(this,a)});return{remove:function(){c.remove();s.remove()}}}:function(g,h){return b(g,a,h)}}function y(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function D(a,g,h){var s=y(a.target);if(B=!a.target.disabled&&s&&s.dojoClick)if(z=(v="useTarget"==B)?s:a.target,v&&a.preventDefault(),
q=a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,A=a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY,t=("object"==typeof B?B.x:"number"==typeof B?B:0)||4,C=("object"==typeof B?B.y:"number"==typeof B?B:0)||4,!F){F=!0;var k=function(a){B=v?f.isDescendant(c.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY),z):B&&(a.changedTouches?a.changedTouches[0].target:
a.target)==z&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX)-q)<=t&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY)-A)<=C};c.doc.addEventListener(g,function(a){k(a);v&&a.preventDefault()},!0);c.doc.addEventListener(h,function(a){k(a);if(B){m=(new Date).getTime();var g=v?z:a.target;"LABEL"===g.tagName&&(g=f.byId(g.getAttribute("for"))||g);var h=a.changedTouches?a.changedTouches[0]:a,t=document.createEvent("MouseEvents");t._dojo_click=
!0;t.initMouseEvent("click",!0,!0,a.view,a.detail,h.screenX,h.screenY,h.clientX,h.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){b.emit(g,"click",t);m=(new Date).getTime()},0)}},!0);a=function(a){c.doc.addEventListener(a,function(g){!g._dojo_click&&((new Date).getTime()<=m+1E3&&!("INPUT"==g.target.tagName&&p.contains(g.target,"dijitOffScreen")))&&(g.stopPropagation(),g.stopImmediatePropagation&&g.stopImmediatePropagation(),"click"==a&&(("INPUT"!=g.target.tagName||"radio"==
g.target.type||"checkbox"==g.target.type)&&"TEXTAREA"!=g.target.tagName&&"AUDIO"!=g.target.tagName&&"VIDEO"!=g.target.tagName)&&g.preventDefault())},!0)};a("click");a("mousedown");a("mouseup")}}var w=5>k("ios"),x=k("pointer-events")||k("MSPointer"),u=function(){var a={},g;for(g in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[g]=k("MSPointer")?"MSPointer"+g.charAt(0).toUpperCase()+g.slice(1):"pointer"+g;return a}(),h=k("touch-events"),F,B,v=!1,z,q,A,t,C,m,g,s;x?d(function(){c.doc.addEventListener(u.down,
function(a){D(a,u.move,u.up)},!0)}):h&&d(function(){function a(g){var h=e.delegate(g,{bubbles:!0});6<=k("ios")&&(h.touches=g.touches,h.altKey=g.altKey,h.changedTouches=g.changedTouches,h.ctrlKey=g.ctrlKey,h.metaKey=g.metaKey,h.shiftKey=g.shiftKey,h.targetTouches=g.targetTouches);return h}s=c.body();c.doc.addEventListener("touchstart",function(a){g=(new Date).getTime();var h=s;s=a.target;b.emit(h,"dojotouchout",{relatedTarget:s,bubbles:!0});b.emit(s,"dojotouchover",{relatedTarget:h,bubbles:!0});D(a,
"touchmove","touchend")},!0);b(c.doc,"touchmove",function(h){g=(new Date).getTime();var m=c.doc.elementFromPoint(h.pageX-(w?0:c.global.pageXOffset),h.pageY-(w?0:c.global.pageYOffset));m&&(s!==m&&(b.emit(s,"dojotouchout",{relatedTarget:m,bubbles:!0}),b.emit(m,"dojotouchover",{relatedTarget:s,bubbles:!0}),s=m),b.emit(m,"dojotouchmove",a(h))||h.preventDefault())});b(c.doc,"touchend",function(h){g=(new Date).getTime();var m=c.doc.elementFromPoint(h.pageX-(w?0:c.global.pageXOffset),h.pageY-(w?0:c.global.pageYOffset))||
c.body();b.emit(m,"dojotouchend",a(h))})});n={press:r("mousedown","touchstart",u.down),move:r("mousemove","dojotouchmove",u.move),release:r("mouseup","dojotouchend",u.up),cancel:r(a.leave,"touchcancel",x?u.cancel:null),over:r("mouseover","dojotouchover",u.over),out:r("mouseout","dojotouchout",u.out),enter:a._eventHandler(r("mouseover","dojotouchover",u.over)),leave:a._eventHandler(r("mouseout","dojotouchout",u.out))};return l.touch=n})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(l,n,f,p,e,b,k,a,d){var c=e.delegate(a,{mouseenter:b.enter,mouseleave:b.leave,keypress:f._keypress}),r;f=p("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var f=!0,k=this.attachScope||this,h=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(h)for(var F=h.split(/\s*,\s*/);h=F.shift();)e.isArray(k[h])?k[h].push(a):k[h]=a,f="containerNode"!=h,this._attachPoints.push(h);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){h=b.split(/\s*,\s*/);for(F=e.trim;b=h.shift();)if(b){var d=
null;-1!=b.indexOf(":")?(d=b.split(":"),b=F(d[0]),d=F(d[1])):b=F(b);d||(d=b);this._attachEvents.push(c(a,b,e.hitch(k,d)))}}return f},_attach:function(a,b,f){b=b.replace(/^on/,"").toLowerCase();b="dijitclick"==b?r||(r=l("./a11yclick")):c[b]||b;return k(a,b,f)},_detachTemplateNodes:function(){var a=this.attachScope||this;n.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];n.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});e.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return f})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),function(l,n,f,p,e,b,k,a,d,c,r,y,D,w,x,u){l=l(null,{declaredClass:"esri.PopupInfo",initialize:function(a,b){if(a){n.mixin(this,
b);this.info=a;this.title=this.getTitle;this.content=this.getContent;var c=this._fieldLabels={},k=this._fieldsMap={};a.fieldInfos&&f.forEach(a.fieldInfos,function(a){var h=a.fieldName.toLowerCase();c[h]=a.label;k[h]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return p.fromJson(p.toJson(this.info))},getTitle:function(){},getContent:function(){},getFieldInfo:function(a){var b;f.some(this.info&&
this.info.fieldInfos,function(c){c.fieldName===a&&(b=c);return!!b});return b},getComponents:function(a){var b=this.info,c=new k,d,e;b.fieldInfos&&(e=f.filter(b.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));e&&0<e.length&&(d=this._getRelatedRecords({graphic:a,fieldsInfo:e}));d?d.always(n.hitch(this,function(){c.resolve(this._getPopupValues(a))})):c.resolve(this._getPopupValues(a));return c.promise},getAttachments:function(a){var b=a.getLayer();a=a.attributes;
if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_getPopupValues:function(a,b){var k=this.info,d=a.getLayer(),e=n.clone(a.attributes)||{},q=n.clone(e),A=k.fieldInfos,t="",C="",m,g,s,K,r,p=d&&d._getDateOpts&&d._getDateOpts().properties,p=p&&p.slice(0),l={dateFormat:{properties:p,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(K in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(K)){var u=
this._relatedInfo[K],E=this._relatedLayersInfo[K];u&&(f.forEach(u.relatedFeatures,function(a){for(r in a.attributes)if(a.attributes.hasOwnProperty(r)&&"esriRelCardinalityOneToOne"===E.relation.cardinality){var g=this._toRelatedFieldName([E.relation.id,r]);e[g]=q[g]=a.attributes[r]}},this),f.forEach(u.relatedStatsFeatures,function(a){for(r in a.attributes)if(a.attributes.hasOwnProperty(r)){var g=this._toRelatedFieldName([E.relation.id,r]);e[g]=q[g]=a.attributes[r]}},this))}A&&f.forEach(A,function(a){g=
a.fieldName;var b=this._getLayerFieldInfo(d,g);b&&(g=a.fieldName=b.name);q[g]=this._formatValue(q[g],g,l);p&&(a.format&&a.format.dateFormat)&&(a=f.indexOf(p,g),-1<a&&p.splice(a,1))},this);if(d){K=d.types;var w=(u=d.typeIdField)&&e[u];for(g in e)if(e.hasOwnProperty(g)&&-1===g.indexOf(this._relatedFieldPrefix)&&(s=e[g],c.isDefined(s))){var y=this._getDomainName(d,a,K,w,g,s);c.isDefined(y)?q[g]=y:g===u&&(y=this._getTypeName(d,a,s),c.isDefined(y)&&(q[g]=y))}}k.title&&(t=this._processFieldsInLinks(this._fixTokens(k.title,
d),e),t=n.trim(c.substitute(q,t,l)||""));if(b)return{title:t};k.description&&(C=this._processFieldsInLinks(this._fixTokens(k.description,d),e),C=n.trim(c.substitute(q,C,l)||""));A&&(m=[],f.forEach(A,function(a){(g=a.fieldName)&&a.visible&&m.push([a.label||g,c.substitute(q,"${"+g+"}",l)||""])}));var D,x;k.mediaInfos&&(D=[],f.forEach(k.mediaInfos,function(a){x=0;s=a.value;switch(a.type){case "image":var g=s.sourceURL,g=g&&n.trim(c.substitute(e,this._fixTokens(g,d)));x=!!g;break;case "piechart":case "linechart":case "columnchart":case "barchart":var b,
g=s.normalizeField;s.fields=f.map(s.fields,function(a){return(b=this._getLayerFieldInfo(d,a))?b.name:a},this);g&&(b=this._getLayerFieldInfo(d,g),s.normalizeField=b?b.name:g);x=f.some(s.fields,function(a){return c.isDefined(e[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(x){a=n.clone(a);s=a.value;var g=a.title?this._processFieldsInLinks(this._fixTokens(a.title,d),e):"",h=a.caption?this._processFieldsInLinks(this._fixTokens(a.caption,d),e):"";a.title=
g?n.trim(c.substitute(q,g,l)||""):"";a.caption=h?n.trim(c.substitute(q,h,l)||""):"";if("image"===a.type)s.sourceURL=c.substitute(e,this._fixTokens(s.sourceURL,d)),s.linkURL&&(s.linkURL=n.trim(c.substitute(e,this._fixTokens(s.linkURL,d))||""));else{var m,t;f.forEach(s.fields,function(a,g){if(-1!==a.indexOf(this._relatedFieldPrefix))t=this._getRelatedChartInfos(a,s,e,l),t instanceof Array?s.fields=t:s.fields[g]=t;else{var b=e[a],b=void 0===b?null:b;m=e[s.normalizeField]||0;b&&m&&(b/=m);s.fields[g]=
{y:b,tooltip:(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(b,a,l,!!m)}}},this)}D.push(a)}},this));return{title:t,description:C,hasDescription:!!k.description,fields:m&&m.length?m:null,mediaInfos:D&&D.length?D:null,formatted:q,editSummary:d&&d.getEditSummary?d.getEditSummary(a):""}},_getRelatedChartInfos:function(a,b,c,d){var k,q,A,t,C,m;k=[];m=this._fromRelatedFieldName(a);C=m[0];q=this._relatedInfo[C];C=this._relatedLayersInfo[C];q&&f.forEach(q.relatedFeatures,function(g){g=
g.attributes;var s,q;for(q in g)if(g.hasOwnProperty(q)&&q===m[1]){s={};t=g[q];b.normalizeField&&(A=-1!==b.normalizeField.indexOf(this._relatedFieldPrefix)?g[this._fromRelatedFieldName(b.normalizeField)[1]]:c[b.normalizeField]);t&&A&&(t/=A);if(b.tooltipField)if(-1!==b.tooltipField.indexOf(this._relatedFieldPrefix)){var f=this._fromRelatedFieldName(b.tooltipField)[1];s.tooltip=g[f]&&"string"===typeof g[f]?g[f]+":\x3cbr/\x3e"+this._formatValue(t,g[f],d,!!A):f+":\x3cbr/\x3e"+this._formatValue(t,f,d,!!A)}else s.tooltip=
(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(t,b.tooltipField,d,!!A);else s.tooltip=t;s.y=t;k.push(s)}},this);return"esriRelCardinalityOneToMany"===C.relation.cardinality||"esriRelCardinalityManyToMany"===C.relation.cardinality?k:k[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,
_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,h,q){a=c._getLayerFieldInfo(b,q);return"$"+(a?"{"+a.name+"}":h)})},_encodeAttributes:function(a){a=n.clone(a)||{};var b,c;for(b in a)if((c=a[b])&&"string"===typeof c)c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[b]=c;return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b),d=this;a&&(a=a.replace(this._reHref,function(a,h){return d._addValuesToHref(a,h,b,c)}).replace(this._reHrefApos,function(a,
h){return d._addValuesToHref(a,h,b,c)}));return a},_addValuesToHref:function(a,b,d,f){b=b&&n.trim(b);return c.substitute(b&&0===b.indexOf("${")?d:f,a)},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_formatValue:function(a,b,d,k){var e=this._fieldsMap[b.toLowerCase()],q=e&&e.format;b=-1!==f.indexOf(d.dateFormat.properties,b);var A="number"===typeof a&&!b&&(!q||!q.dateFormat);if(!c.isDefined(a)||!e||!c.isDefined(q))return A?this._forceLTR(a):a;var t="",e=[],C=q.hasOwnProperty("places")||
q.hasOwnProperty("digitSeparator"),m=q.hasOwnProperty("digitSeparator")?q.digitSeparator:!0;if(C&&!b)t="NumberFormat",e.push("places: "+(c.isDefined(q.places)&&(!k||0<q.places)?Number(q.places):"Infinity")),e.length&&(t+="("+e.join(",")+")");else if(q.dateFormat)t="DateFormat"+this._insertOffset(this._dateFormats[q.dateFormat]||this._dateFormats.shortDateShortTime);else return A?this._forceLTR(a):a;var g=this._applyFormatting(a,t,d);C&&-1<a.constructor.toString().indexOf("Array")&&(g="",f.forEach(a,
n.hitch(this,function(a){g=g+this._applyFormatting(a,t,d)+" "})));C&&!m&&u.group&&(g=g.replace(RegExp("\\"+u.group,"g"),""));return A?this._forceLTR(g):g},_applyFormatting:function(a,b,d){return c.substitute({myKey:a},"${myKey:"+b+"}",d)||""},_forceLTR:function(b){var c=a("ie");return c&&10>=c?b:"\x3cspan class\x3d'esriNumericValue'\x3e"+b+"\x3c/span\x3e"},_insertOffset:function(a){a&&(a=c.isDefined(this.utcOffset)?a.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):a);return a},_getDomainName:function(a,
b,c,d,f,q){return(a=a.getDomain&&a.getDomain(f,{feature:b}))&&a.codedValues?a.getName(q):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c=new k,d;this._relatedLayersInfo?this._queryRelatedLayers(b).then(n.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),n.hitch(this,this._handlerErrorResponse,c)):this._getRelatedLayersInfo(a).then(n.hitch(this,function(a){for(d in a)a.hasOwnProperty(d)&&a[d]&&(this._relatedLayersInfo[d].relatedLayerInfo=
a[d]);this._queryRelatedLayers(b).then(n.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),n.hitch(this,this._handlerErrorResponse,c))}),n.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(a){var b=a.fieldsInfo,c,k,e={};c=a.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});f.forEach(b,function(a){var b,t,h,m;b=this._fromRelatedFieldName(a.fieldName);t=b[0];b=b[1];t&&(this._relatedLayersInfo[t]||(f.some(c.relationships,
function(a){if(a.id==t)return m=a,!0}),m&&(this._relatedLayersInfo[t]={relation:m,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[t]&&(this._relatedLayersInfo[t].relatedFields.push(b),a.statisticType&&(h=new x,h.statisticType=a.statisticType,h.onStatisticField=b,h.outStatisticFieldName=b,this._relatedLayersInfo[t].outStatistics.push(h))))},this);for(k in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(k)&&this._relatedLayersInfo[k]&&(a=this._relatedLayersInfo[k].relation,
a=c.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[k].relatedLayerUrl=a,e[k]=y({url:a,content:{f:"json"},callbackParamName:"callback"}));return d(e)},_queryRelatedLayers:function(a){var b={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]}));return d(b)},_queryRelatedLayer:function(a){var b,c,k,e,q,A,t,C,m,g;b=a.graphic;c=b.getLayer().url.match(/[0-9]+$/g)[0];C=a.relatedInfo;
t=C.relatedLayerInfo;m=C.relatedLayerUrl;g=C.relation;f.some(t.relationships,function(a){if(a.relatedTableId===parseInt(c,10))return k=a,!0},this);k&&(a=new D,f.some(t.fields,function(a){if(a.name===k.keyField)return q=-1!==f.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),e="string"===q?k.keyField+"\x3d'"+b.attributes[g.keyField]+"'":k.keyField+"\x3d"+b.attributes[g.keyField],a.where=e,a.outFields=C.relatedFields,
C.outStatistics&&(0<C.outStatistics.length&&t.supportsStatistics)&&(A=new D,A.where=a.where,A.outFields=a.outFields,A.outStatistics=C.outStatistics),b=new w(m),e=[],e.push(b.execute(a)),A&&e.push(b.execute(A)));return d(e)},_setRelatedRecords:function(a,b){this._relatedInfo=[];for(var d in b)if(b.hasOwnProperty(d)&&b[d]){var k=b[d];this._relatedInfo[d]={};this._relatedInfo[d].relatedFeatures=k[0].features;c.isDefined(k[1])&&(this._relatedInfo[d].relatedStatsFeatures=k[1].features)}},_handlerErrorResponse:function(a,
b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}});b("extend-esri")&&(r.PopupInfo=r.PopupInfoTemplate=l);return l})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(l,n,f,p,e,b,k,a,d,c,r,y,D,w,x,u,h){var F,B,v=new (n([y,k],{curNode:null,activeStack:[],constructor:function(){var c=a.hitch(this,function(a){f.isDescendant(this.curNode,a)&&this.set("curNode",null);f.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});l.before(b,"empty",c);l.before(b,"destroy",c)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,h=a.document&&a.document.body;if(h){var m=r("pointer-events")?"pointerdown":r("MSPointer")?
"MSPointerDown":r("touch-events")?"mousedown, touchstart":"mousedown",g=d(a.document,m,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),s=d(h,"focusin",function(a){if(a.target.tagName){var g=a.target.tagName.toLowerCase();"#document"==g||"body"==g||(x.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),k=d(h,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){g.remove();s.remove();k.remove();h=g=
s=k=null}}}},_onBlurNode:function(b){b=(new Date).getTime();b<F+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(a.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),b<B+100||(this._clearActiveWidgetsTimer=setTimeout(a.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){B=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);e.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=p.get(a,"dijitPopupParent");if(d)a=u.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===D.body())break;a=w.get(a.ownerDocument).frameElement}else{var m=a.getAttribute&&a.getAttribute("widgetId"),g=m&&u.byId(m);g&&!("mouse"==b&&g.get("disabled"))&&c.unshift(m);a=a.parentNode}}}catch(s){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(F=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,m=a.length-1;if(a[m]!=c[d]){this.set("activeStack",a);var g;for(g=d;0<=g&&c[g]!=a[g];g--)if(d=u.byId(c[g]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(g++;g<=m;g++)if(d=u.byId(a[g]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));c(function(){var a=v.registerWin(w.get(document));r("ie")&&d(window,"unload",function(){a&&(a.remove(),a=null)})});h.focus=function(a){v.focus(a)};for(var z in v)/^_/.test(z)||(h.focus[z]="function"==typeof v[z]?a.hitch(v,z):v[z]);v.watch(function(a,b,c){h.focus[a]=c});return v})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(l,n,f,p,e,b){return l([b,e],{_onMap:function(b){var a=this.constructor._onMap,d;if(!a||!a.FINAL)delete this.constructor._onMap,a=this.registerConnectEvents(),a.FINAL=!0;b=b.toLowerCase();a[b]?d=this[a[b].method]:(b=this._onCamelCase(b),this[b]&&(d=b));return d},on:function(b,a){var d=this._onMap(b),c=b.replace(/\-/g,""),f="on"+c in this.domNode;return d||!f?this.inherited(arguments):this.own(p(this.domNode,c,a))[0]},emit:function(b,a,d){var c,f,e,p=b.toLowerCase(),l=this.constructor._onMap||
this.registerConnectEvents();f=this[this._onMap(p)];a=a||{};a.target||(a.target=this);f&&(l&&l[p])&&(this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},l[p].argKeys)(a),e=n.mixin({},arguments),e[2]=c,e[0]=l[p].name.replace(/^on/,""));return this.inherited(e||arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(l,n,f,p,e,b,k,a,d,c,r,y,D,w,x,u){function h(a){return eval("("+a+")")}function F(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<v){var b=a._nameCaseMap={},m;for(m in c)"_"!==m.charAt(0)&&(b[m.toLowerCase()]=m);b._extendCnt=v}return b}function B(a,b){var c=a.join();if(!z[c]){for(var m=[],g=0,d=a.length;g<d;g++){var h=a[g];m[m.length]=z[h]=z[h]||f.getObject(h)||~h.indexOf("/")&&(b?b(h):l(h))}g=m.shift();z[c]=m.length?g.createSubclass?g.createSubclass(m):g.extend.apply(g,m):g}return z[c]}
new Date("X");var v=0;d.after(f,"extend",function(){v++},!0);var z={},q={_clearCache:function(){v++;z={}},_functionFromScript:function(a,b){var c="",m="",g=a.getAttribute(b+"args")||a.getAttribute("args"),d=a.getAttribute("with"),g=(g||"").split(/\s*,\s*/);d&&d.length&&p.forEach(d.split(/\s*,\s*/),function(a){c+="with("+a+"){";m+="}"});return new Function(g,c+a.innerHTML+m)},instantiate:function(a,b,c){b=b||{};c=c||{};var m=(c.scope||n._scopeName)+"Type",g="data-"+(c.scope||n._scopeName)+"-",d=g+
"type",h=g+"mixins",f=[];p.forEach(a,function(a){var g=m in b?b[m]:a.getAttribute(d)||a.getAttribute(m);if(g){var c=a.getAttribute(h),g=c?[g].concat(c.split(/\s*,\s*/)):[g];f.push({node:a,types:g})}});return this._instantiate(f,b,c)},_instantiate:function(a,b,d,m){function g(a){!b._started&&!d.noStart&&p.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=p.map(a,function(a){var g=a.ctor||B(a.types,d.contextRequire);if(!g)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(g,a.node,b,d,a.scripts,a.inherited)},this);return m?c(a).then(g):g(a)},construct:function(b,c,e,m,g,s){function k(a){B&&f.setObject(B,a);for(H=0;H<J.length;H++)d[J[H].advice||"after"](a,J[H].method,f.hitch(a,J[H].func),!0);for(H=0;H<N.length;H++)N[H].call(a);for(H=0;H<M.length;H++)a.watch(M[H].prop,M[H].func);for(H=0;H<L.length;H++)x(a,L[H].event,L[H].func);return a}var q=b&&b.prototype;m=m||{};var l={};m.defaults&&f.mixin(l,m.defaults);s&&f.mixin(l,s);var u;
D("dom-attributes-explicit")?u=c.attributes:D("dom-attributes-specified-flag")?u=p.filter(c.attributes,function(a){return a.specified}):(s=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),u=p.map(s.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var y=m.scope||n._scopeName;
s="data-"+y+"-";var E={};"dojo"!==y&&(E[s+"props"]="data-dojo-props",E[s+"type"]="data-dojo-type",E[s+"mixins"]="data-dojo-mixins",E[y+"type"]="dojoType",E[s+"id"]="data-dojo-id");for(var H=0,G,y=[],B,v;G=u[H++];){var I=G.name,z=I.toLowerCase();G=G.value;switch(E[z]||z){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":v=G;break;case "data-dojo-id":case "jsid":B=G;break;case "data-dojo-attach-point":case "dojoattachpoint":l.dojoAttachPoint=G;break;case "data-dojo-attach-event":case "dojoattachevent":l.dojoAttachEvent=
G;break;case "class":l["class"]=c.className;break;case "style":l.style=c.style&&c.style.cssText;break;default:if(I in q||(I=F(b)[z]||I),I in q)switch(typeof q[I]){case "string":l[I]=G;break;case "number":l[I]=G.length?Number(G):NaN;break;case "boolean":l[I]="false"!=G.toLowerCase();break;case "function":""===G||-1!=G.search(/[^\w\.]+/i)?l[I]=new Function(G):l[I]=f.getObject(G,!1)||new Function(G);y.push(I);break;default:z=q[I],l[I]=z&&"length"in z?G?G.split(/\s*,\s*/):[]:z instanceof Date?""==G?new Date(""):
"now"==G?new Date:r.fromISOString(G):z instanceof a?n.baseUrl+G:h(G)}else l[I]=G}}for(u=0;u<y.length;u++)E=y[u].toLowerCase(),c.removeAttribute(E),c[E]=null;if(v)try{v=h.call(m.propsThis,"{"+v+"}"),f.mixin(l,v)}catch(O){throw Error(O.toString()+" in data-dojo-props\x3d'"+v+"'");}f.mixin(l,e);g||(g=b&&(b._noScript||q._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",c));var J=[],N=[],M=[],L=[];if(g)for(H=0;H<g.length;H++)E=g[H],c.removeChild(E),e=E.getAttribute(s+"event")||E.getAttribute("event"),m=
E.getAttribute(s+"prop"),v=E.getAttribute(s+"method"),y=E.getAttribute(s+"advice"),u=E.getAttribute("type"),E=this._functionFromScript(E,s),e?"dojo/connect"==u?J.push({method:e,func:E}):"dojo/on"==u?L.push({event:e,func:E}):l[e]=E:"dojo/aspect"==u?J.push({method:v,advice:y,func:E}):"dojo/watch"==u?M.push({prop:m,func:E}):N.push(E);b=(g=b.markupFactory||q.markupFactory)?g(l,c,b):new b(l,c);return b.then?b.then(k):k(b)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,g=
c(a.parent),b={dir:b.getAttribute("dir")||g.dir,lang:b.getAttribute("lang")||g.lang,textDir:b.getAttribute(k)||g.textDir},m;for(m in b)b[m]&&(a.inherited[m]=b[m])}return a.inherited}var m=[],g=[],d={},h=(b.scope||n._scopeName)+"Type",e="data-"+(b.scope||n._scopeName)+"-",f=e+"type",k=e+"textdir",e=e+"mixins",q=a.firstChild,r=b.inherited;if(!r){var u=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&u(a.parentNode,b)},r={dir:u(a,"dir"),lang:u(a,"lang"),textDir:u(a,k)},w;for(w in r)r[w]||
delete r[w]}for(var r={inherited:r},x,v;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(x&&"script"==q.nodeName.toLowerCase())(z=q.getAttribute("type"))&&/^dojo\/\w/i.test(z)&&x.push(q),q=q.nextSibling;else if(v)q=q.nextSibling;else{var z=q.getAttribute(f)||q.getAttribute(h);w=q.firstChild;if(!z&&(!w||3==w.nodeType&&!w.nextSibling))q=q.nextSibling;else{v=null;if(z){var F=q.getAttribute(e);x=F?[z].concat(F.split(/\s*,\s*/)):[z];try{v=B(x,b.contextRequire)}catch(O){}v||p.forEach(x,function(a){~a.indexOf("/")&&
!d[a]&&(d[a]=!0,g[g.length]=a)});F=v&&!v.prototype._noScript?[]:null;r={types:x,ctor:v,parent:r,node:q,scripts:F};r.inherited=c(r);m.push(r)}else r={node:q,scripts:x,parent:r};x=F;v=q.stopParser||v&&v.prototype.stopParser&&!b.template;q=w}}else{if(!r||!r.node)break;q=r.node.nextSibling;v=!1;r=r.parent;x=r.scripts}var J=new y;g.length?(D("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+g.join(", ")),(b.contextRequire||l)(g,function(){J.resolve(p.filter(m,function(a){if(!a.ctor)try{a.ctor=
B(a.types,b.contextRequire)}catch(g){}for(var c=a.parent;c&&!c.types;)c=c.parent;var m=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(m&&m.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):J.resolve(m);return J.promise},_require:function(a,b){var c=h("{"+a.innerHTML+"}"),m=[],g=[],d=new y,e=b&&b.contextRequire||l,k;for(k in c)m.push(k),g.push(c[k]);e(g,function(){for(var a=0;a<m.length;a++)f.setObject(m[a],arguments[a]);d.resolve(arguments)});
return d.promise},_scanAmd:function(a,b){var c=new y,m=c.promise;c.resolve(!0);var g=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){m=m.then(function(){return g._require(a,b)});a.parentNode.removeChild(a)});return m},parse:function(a,c){var d;!c&&a&&a.rootNode?(c=a,d=c.rootNode):a&&f.isObject(a)&&!("nodeType"in a)?c=a:d=a;d=d?b.byId(d):k.body();c=c||{};var m=c.template?{template:!0}:{},g=[],h=this,e=this._scanAmd(d,c).then(function(){return h.scan(d,c)}).then(function(a){return h._instantiate(a,
m,c,!0)}).then(function(a){return g=g.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});f.mixin(g,e);return g}};n.parser=q;e.parseOnLoad&&u(100,q,"parse");return q})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(l,n,f){return f("dijit.Destroyable",null,{destroy:function(f){this._destroyed=!0},own:function(){var f=["destroyRecursive","destroy","remove"];l.forEach(arguments,function(e){function b(){a.remove();
l.forEach(d,function(a){a.remove()})}var k,a=n.before(this,"destroy",function(a){e[k](a)}),d=[];e.then?(k="cancel",e.then(b,b)):l.forEach(f,function(a){"function"===typeof e[a]&&(k||(k=a),d.push(n.after(e,a,b,!0)))})},this);return arguments}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(l,n,f,p,e){return f("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,
_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);e.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(p.hitch(this,function(b){this._startupWidgets=b;for(var a=0;a<b.length;a++)this._processTemplateNode(b[a],function(a,b){return a[b]},function(a,b,e){return b in
a?a.connect(a,b,e):a.on(b,e,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,e,a){return e(b,"dojoType")||e(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){l.forEach(this._startupWidgets,
function(b){b&&(!b._started&&b.startup)&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(l,n,f,p,e,b,k,a){var d=n("dijit._TemplatedMixin",a,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,d=this;return k.substitute(a,this,
function(a,c){"!"==c.charAt(0)&&(a=p.getObject(c.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+c);return null==a?"":"!"==c.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=l(this.templatePath,{sanitize:!0}));var a=d.getCachedTemplate(this.templateString,
this._skipNodeCache,this.ownerDocument),b;if(p.isString(a)){if(b=f.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});d._templateCache={};d.getCachedTemplate=function(a,b,e){var l=d._templateCache,n=a,p=l[n];
if(p){try{if(!p.ownerDocument||p.ownerDocument==(e||document))return p}catch(u){}f.destroy(p)}a=k.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return l[n]=a;b=f.toDom(a,e);if(1!=b.nodeType)throw Error("Invalid template: "+a);return l[n]=b};b("ie")&&e(window,"unload",function(){var a=d._templateCache,b;for(b in a){var e=a[b];"object"==typeof e&&f.destroy(e);delete a[b]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(l){return l.cache})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(l,n,f,p){f(function(){n("highcontrast")&&l.add(p.body(),"dijit_a11y")});return n})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(l,n,f,p,e,b,k,a){l=l([b,k],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(a,b){n.mixin(this,b);this.initialize(a,
b)},getTitle:function(a){var b;this.info&&(b=this.titleHasRelatedFields?"":this._getPopupValues(a,!0).title);return b||""},getContent:function(b){return this.info?(new a({template:this,graphic:b,chartTheme:this.chartTheme},p.create("div"))).domNode:""}});f("extend-esri")&&n.setObject("dijit.PopupTemplate",l,e);return l})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(l,n,f,p,e,b,k){e.add("highcontrast",function(){var a=
k.doc.createElement("div");a.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(n.blankGif||l.toUrl("./resources/blank.gif"))+'");';k.body().appendChild(a);var b=p.getComputedStyle(a),c=b.backgroundImage,b=b.borderTopColor==b.borderRightColor||c&&("none"==c||"url(invalid-url:)"==c);8>=e("ie")?a.outerHTML="":k.body().removeChild(a);return b});b(function(){e("highcontrast")&&f.add(k.body(),"dj_a11y")});return e})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(l,n,f,p,e,b,k){b.extend(l,{waiRole:"",waiState:""});return e("dijit._Templated",[n,f],{widgetsInTemplate:!1,constructor:function(){k.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(a,b){var c=this.inherited(arguments),e=b(a,"waiRole");e&&a.setAttribute("role",e);(e=b(a,"waiState"))&&p.forEach(e.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),a.setAttribute("aria-"+
b[0],b[1]))});return c}})})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(l,n,f,p){p.extend(n,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return f("dijit._FocusMixin",null,{_focusManager:l})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(l,n,f,p,e,b,k,a,d,c,r,y,D){function w(){}function x(a){return function(b,c,d,e){return b&&"string"==typeof c&&b[c]==w?b.on(c.substring(2).toLowerCase(),k.hitch(d,e)):a.apply(f,arguments)}}l.around(f,"connect",x);b.connect&&l.around(b,"connect",x);l=p("dijit._Widget",[r,y,D],{onClick:w,onDblClick:w,onKeyDown:w,onKeyPress:w,onKeyUp:w,onMouseDown:w,onMouseMove:w,onMouseOut:w,onMouseOver:w,onMouseLeave:w,onMouseEnter:w,onMouseUp:w,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
w&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===w?f.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,c)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?a("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});
return l})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(l,n,f,p,e,b,k,a,d,c,r,y,D,w,x,u,h,F,B,v){var z=0;n=n([B,x,u],{declaredClass:"esri.dijit._PopupRenderer",
constructor:function(){this._nls=p.mixin({},v.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(p.hitch(this,this._handleComponentsSuccess),p.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var a=this._mediaInfos,d=a.length,h=this.domNode,f=this._prevMedia,m=this._nextMedia;if(1<d){var g=0,s=0;e.forEach(a,function(a){"image"===a.type?g++:-1!==a.type.indexOf("chart")&&s++});g&&(c.set(this._imageCount,"innerHTML",g),b.query(".summary .image",h).removeClass("hidden"));s&&(c.set(this._chartCount,"innerHTML",s),b.query(".summary .chart",h).removeClass("hidden"))}else b.query(".summary",
h).addClass("hidden"),r.add(f,"hidden"),r.add(m,"hidden");a=this._mediaPtr;0===a?r.add(f,"hidden"):r.remove(f,"hidden");a===d-1?r.add(m,"hidden"):r.remove(m,"hidden");this._destroyFrame()},_displayMedia:function(){var a=this._mediaInfos[this._mediaPtr],d=a.title,e=a.caption,h=b.query(".mediaSection .hzLine",this.domNode)[0];c.set(this._mediaTitle,"innerHTML",d);r[d?"remove":"add"](this._mediaTitle,"hidden");c.set(this._mediaCaption,"innerHTML",e);r[e?"remove":"add"](this._mediaCaption,"hidden");r[d&&
e?"remove":"add"](h,"hidden");this._rid=null;if("image"===a.type)this._showImage(a.value);else{var m=this,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],e=a.value.theme||this.chartTheme;p.isString(e)&&(e=e.replace(/\./gi,"/"),-1===e.indexOf("/")&&(e="dojox/charting/themes/"+e));e||(e="./Rainbow");d.push(e);try{var g=this._rid=z++;l(d,function(b,c,d){g===m._rid&&(m._rid=null,m._showChart(a.type,a.value,b,c,d))})}catch(f){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(a){return(a=
a&&p.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(a){r.add(this._mediaFrame,"image");var c=D.get(this._gallery,"height"),d;a.linkURL&&(d=y.create("a",{href:a.linkURL,target:this._preventNewTab(a.linkURL)?"":"_blank"},this._mediaFrame));y.create("img",{className:"esriPopupMediaImage",src:a.sourceURL},d||this._mediaFrame);var e=b.query(".esriPopupMediaImage",this._mediaFrame)[0],m=this,g;g=f.connect(e,"onload",function(){f.disconnect(g);g=null;m._imageLoaded(e,
c)})},_showChart:function(a,b,c,d,m){r.remove(this._mediaFrame,"image");c=this._chart=new c(y.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});m&&c.setTheme(m);switch(a){case "piechart":c.addPlot("default",{type:"Pie",labels:!1});c.addSeries("Series A",b.fields);break;case "linechart":c.addPlot("default",{type:"Markers"});c.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});e.forEach(b.fields,
function(a,b){a.x=b+1});c.addSeries("Series A",b.fields);break;case "columnchart":c.addPlot("default",{type:"Columns",gap:3});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.addSeries("Series A",b.fields);break;case "barchart":c.addPlot("default",{type:"Bars",gap:3}),c.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),c.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),c.addSeries("Series A",b.fields)}this._action=new d(c);c.render()},
_destroyFrame:function(){this._rid=null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);c.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),D.set(a,"marginTop",c+"px"))},_attListHandler:function(a,b){if(a===this._dfd){this._dfd=null;var d="";!(b instanceof Error)&&(b&&b.length)&&e.forEach(b,function(a){d+="\x3cli\x3e";d+="\x3ca href\x3d'"+F.addProxy(a.url)+"' target\x3d'_blank'\x3e"+
(a.name||"[No name]")+"\x3c/a\x3e";d+="\x3c/li\x3e"});c.set(this._attachmentsList,"innerHTML",d||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(a){if(a){var h=this.showTitle?a.title:"",f=a.description,k=a.fields,m=a.mediaInfos,g=this.domNode,s=this._nls,l=this,n=this.template,u=this.graphic;this._prevMedia.title=s.NLS_prevMedia;this._nextMedia.title=s.NLS_nextMedia;c.set(this._title,"innerHTML",h);h||r.add(this._title,"hidden");!a.hasDescription&&k&&(f="",e.forEach(k,
function(a){f+="\x3ctr valign\x3d'top'\x3e";f+="\x3ctd class\x3d'attrName'\x3e"+w.encode(a[0])+"\x3c/td\x3e";f+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+s.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";f+="\x3c/tr\x3e"}),f&&(f="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+f+"\x3c/table\x3e"));c.set(this._description,"innerHTML",f);f||r.add(this._description,"hidden");b.query("a",
this._description).forEach(function(a){l._preventNewTab(a.href)?"_blank"===a.target&&c.remove(a,"target"):c.set(a,"target","_blank")});h&&f?b.query(".mainSection .hzLine",g).removeClass("hidden"):h||f?b.query(".mainSection .hzLine",g).addClass("hidden"):b.query(".mainSection",g).addClass("hidden");if(h=this._dfd=n.getAttachments(u))h.addBoth(p.hitch(this,this._attListHandler,h)),c.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+s.NLS_searching+"...\x3c/li\x3e"),b.query(".attachmentsSection",g).removeClass("hidden");
m&&m.length&&(b.query(".mediaSection",g).removeClass("hidden"),d.setSelectable(this._mediaFrame,!1),this._mediaInfos=m,this._mediaPtr=0,this._updateUI(),this._displayMedia());a.editSummary&&(c.set(this._editSummary,"innerHTML",a.editSummary),m&&m.length&&r.remove(this._mediaBreak,"hidden"),r.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){console.log("PopupRenderer: error loading template",a)}});k("extend-esri")&&p.setObject("dijit._PopupRenderer",n,h);return n})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(l){var n=l.getObject("dojox.html.entities",!0),f=function(e,b){var f,a;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&b.length==b._encCache.length)f=b._encCache.mapper,a=b._encCache.regexp;else{f={};a=["["];var d;for(d=0;d<b.length;d++)f[b[d][0]]="\x26"+b[d][1]+";",a.push(b[d][0]);a.push("]");a=RegExp(a.join(""),"g");b._encCache={mapper:f,regexp:a,length:b.length}}return e=e.replace(a,function(a){return f[a]})},p=function(e,
b){var f,a;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)f=b._decCache.mapper,a=b._decCache.regexp;else{f={};a=["("];var d;for(d=0;d<b.length;d++){var c="\x26"+b[d][1]+";";d&&a.push("|");f[c]=b[d][0];a.push(c)}a.push(")");a=RegExp(a.join(""),"g");b._decCache={mapper:f,regexp:a,length:b.length}}return e=e.replace(a,function(a){return f[a]})};n.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];n.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];n.encode=function(e,b){e&&(b?e=f(e,b):(e=f(e,n.html),e=f(e,n.latin)));return e};n.decode=function(e,b){e&&(b?e=p(e,b):(e=p(e,n.html),e=p(e,n.latin)));return e};return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(l,n,f,p,e,b,k,a,d,c,r,y,D,w,x,u,h,F,B,v,z,q,A){function t(b){return function(c){a[c?"set":"remove"](this.domNode,b,c);this._set(b,c)}}D.add("dijit-legacy-requires",!w.isAsync);D.add("dojo-bidi",!1);D("dijit-legacy-requires")&&h(0,function(){l(["dijit/_base/manager"])});var C={};p=b("dijit._WidgetBase",[F,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:t("lang"),dir:"",_setDirAttr:t("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:p.blankGif||l.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,
d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=k.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,x.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=v.body(this.ownerDocument);A.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);n.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(n.map(a,function(a){return a+"Rtl"})));d.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,n.forEach(this.getChildren(),function(a){!a._started&&
(!a._destroyed&&x.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();n.forEach(this._connects,x.hitch(this,"disconnect"));n.forEach(this._supportingWidgets,b);this.domNode&&n.forEach(A.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
A.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?a.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){n.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;x.isObject(a)?
y.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(b,c,e){e=3<=arguments.length?e:this.attributeMap[b];n.forEach(x.isArray(e)?e:[e],function(e){var f=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":x.isFunction(c)&&(c=x.hitch(this,c));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;f.tagName?a.set(f,e,c):f.set(e,c);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(c));
break;case "innerHTML":f.innerHTML=c;break;case "class":d.replace(f,c,this[b])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(x.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!x.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d]&&this[d].tagName,h;if(h=f)if(!(h=
C[f])){h=this[d];var k={},l;for(l in h)k[l.toLowerCase()]=!0;h=C[f]=k}l=h;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:l&&c.l in l&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",
g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
u.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?f.after(this,c,b,!0):this.own(u(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):
[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(e.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(B.subscribe(a,x.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():r.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=y.get(this.domNode,"display")},placeAt:function(a,b){var d=
!a.tagName&&A.byId(a);d&&d.addChild&&(!b||"number"===typeof b)?d.addChild(this,b):(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(b||"")?d.containerNode:d.domNode:k.byId(a,this.ownerDocument),c.place(this.domNode,d,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(x.hitch(this,function(){c&&(c=null,this._destroyed||x.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});D("dojo-bidi")&&
p.extend(q);return p})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(l,n){var f={};l.setObject("dojo.date.stamp",f);f.fromISOString=function(l,e){f._isoRegExp||(f._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=f._isoRegExp.exec(l),k=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);e&&(e=new Date(e),n.forEach(n.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return e["get"+a]()}),function(a,d){b[d]=b[d]||a}));k=new Date(b[0]||1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&k.setFullYear(b[0]||1970);var a=0,d=b[7]&&b[7].charAt(0);"Z"!=d&&(a=60*(b[8]||0)+(Number(b[9])||0),"-"!=d&&(a*=-1));d&&(a-=k.getTimezoneOffset());a&&k.setTime(k.getTime()+6E4*a)}return k};f.toISOString=function(f,e){var b=function(a){return 10>a?"0"+a:a};e=e||{};var k=[],a=e.zulu?"getUTC":"get",d="";"time"!=e.selector&&(d=f[a+"FullYear"](),d=["0000".substr((d+
"").length)+d,b(f[a+"Month"]()+1),b(f[a+"Date"]())].join("-"));k.push(d);if("date"!=e.selector){d=[b(f[a+"Hours"]()),b(f[a+"Minutes"]()),b(f[a+"Seconds"]())].join(":");a=f[a+"Milliseconds"]();e.milliseconds&&(d+="."+(100>a?"0":"")+b(a));if(e.zulu)d+="Z";else if("time"!=e.selector)var a=f.getTimezoneOffset(),c=Math.abs(a),d=d+((0<a?"-":"+")+b(Math.floor(c/60))+":"+b(c%60));k.push(d)}return k.join("T")};return f})},"*noref":1}});
define("esri/layers/GeoRSSLayer","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ./ServiceGeneratedFeatureCollection".split(" "),function(l,n,f,p,e,b,k,a){l=l([a],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:location.protocol+"//utility.arcgis.com/sharing/rss",constructor:function(a,c){b.defaults.geoRSSService&&(this.serviceUrl=b.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=k({url:this.serviceUrl,content:{url:this.url,
refresh:this.loaded?!0:void 0,outSR:this._outSR?f.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(a){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}});p("extend-esri")&&n.setObject("layers.GeoRSSLayer",l,e);return l});